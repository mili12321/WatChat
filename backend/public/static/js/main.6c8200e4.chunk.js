(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{183:function(e,t,a){e.exports=a(522)},513:function(e,t){},521:function(e,t,a){},522:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(41),i=a.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(13),c=a(11),l=a(7),m=a(8),u=a(10),d=a(9),p=a(50),v=a(28),g=a(6),h=a(5),f=a.n(h),E=a(12),y=a(27),k=a(168),w=a.n(k).a.create({withCredentials:!0}),b=function(e,t){return U(e,"GET",t)},N=function(e,t){return U(e,"POST",t)},j=function(e,t){return U(e,"PUT",t)},S=function(e,t){return U(e,"DELETE",t)};function U(e){return C.apply(this,arguments)}function C(){return(C=Object(E.a)(f.a.mark((function e(t){var a,n,s,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"get",n=r.length>2&&void 0!==r[2]?r[2]:null,e.prev=2,e.next=5,w({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var O=[],_={query:function(e){var t="?search=".concat(e.search,"&minYear=").concat(e.minYear,"&maxYear=").concat(e.maxYear,"&type=").concat(e.type);return b("movie".concat(t))},getById:function(e){return b("movie/".concat(e))},save:function(e){return j("movie/".concat(e._id),e)},getFavoriteList:function(){return(O=x("favorite"))?(console.log("fav list in Storage:",O),Promise.resolve(O)):"no favorite movies"},toggleFavList:function(e){console.log("the movie that added to fav list in Storage:",e),O=[e].concat(Object(y.a)(O)),t="favorite",a=O,localStorage.setItem(t,JSON.stringify(a));var t,a}};function x(e){var t=localStorage.getItem(e);return JSON.parse(t)}function M(e){return function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"LOADING_START"}),t.next=4,_.query(e);case 4:n=t.sent,a({type:"SET_MOVIES",movies:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("MovieActions: err in loadMovies",t.t0);case 11:return t.prev=11,a({type:"LOADING_DONE"}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}function T(e){return function(){var t=Object(E.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.save(e);case 3:a({type:"UPDATE_MOVIE",movie:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("MovieActions: err in updateMovie",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}var L={login:function(e){return F.apply(this,arguments)},logout:function(){return A.apply(this,arguments)},signup:function(e){return R.apply(this,arguments)},getUsers:function(){return b("user")},getById:function(e){return b("user/".concat(e))},remove:function(e){return S("user/".concat(e))},update:function(e){return I.apply(this,arguments)},addFavMovie:function(e,t){return D.apply(this,arguments)},removeFavMovie:function(e,t){return P.apply(this,arguments)},loginByGoogle:function(e){return G.apply(this,arguments)}};function I(){return(I=Object(E.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("user/".concat(t._id),t);case 2:return a=e.sent,e.abrupt("return",V(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(E.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/login",t);case 2:return a=e.sent,e.abrupt("return",V(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(E.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/signup",t);case 2:return a=e.sent,e.abrupt("return",V(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(E.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(E.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/loginByGoogle",t);case 2:return a=e.sent,e.abrupt("return",V(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function D(){return(D=Object(E.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.favMovies=[a].concat(Object(y.a)(t.favMovies)),e.next=3,j("user/".concat(t._id),t);case 3:return n=e.sent,e.abrupt("return",V(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(E.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.favMovies=t.favMovies.filter((function(e){return e._id!==a._id})),e.next=3,j("user/".concat(t._id),t);case 3:return n=e.sent,e.abrupt("return",V(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return function(){var e=Object(E.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,L.getUsers();case 4:a=e.sent,t({type:"SET_USERS",users:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 11:return e.prev=11,t({type:"LOADING_DONE"}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()}function W(){return function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.logout();case 2:t({type:"SET_USER",user:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function H(e){return function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.update(e);case 2:n=t.sent,a({type:"UPDATE_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function z(e,t){return e.favMovies.filter((function(e){return e._id===t._id})).length>0?function(){var a=Object(E.a)(f.a.mark((function a(n){var s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,L.removeFavMovie(e,t);case 3:s=a.sent,n({type:"REMOVE_FAV_MOVIE",user:s}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("UserActions: err in removeFavoriteMovie",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}():function(){var a=Object(E.a)(f.a.mark((function a(n){var s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,L.addFavMovie(e,t);case 3:s=a.sent,n({type:"ADD_FAV_MOVIE",user:s}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("UserActions: err in addFavoriteMovie",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}var X=a(169);function Y(e){var t=e.movie;return s.a.createElement(s.a.Fragment,null,s.a.createElement(X.a,{className:"parallax-effect-glare-scale",perspective:500,glareEnable:!0,glareMaxOpacity:.45,scale:1.02,style:{backgroundImage:"url(".concat(t.coverUrl,")")}},s.a.createElement("div",{className:"inner-element"},s.a.createElement(c.Link,{to:"/room/".concat(t._id)},s.a.createElement("div",{className:"paly-card-btn"},s.a.createElement("i",{className:"fas fa-play card-play"}))))))}var J=a(171),q=a.n(J),K=(a(211),a(173)),Z=a(174),$=a(80),Q=a(59),ee=a.n(Q),te=(a(84),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).changeRateToStars=function(t){for(var a=[],n=e.props.avgReview(t)/2,r=1;r<Math.ceil(n);r++)a.push(s.a.createElement("i",{className:"fas fa-star star-color"}));if(Math.ceil(n)===n)return s.a.createElement("i",{className:"fas fa-star star-color"});if(Math.ceil(n)>n&&a.push(s.a.createElement("i",{className:"fas fa-star-half-alt star-color"})),Math.ceil(n)<5)for(var i=n+1;i<5;i++)a.push(s.a.createElement("i",{className:"far fa-star star-color"}));return a},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.movies,n=t.toggleFavoriteList,r=t.isFavoriteMovie;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee.a,{infinite:!0,mouseTracking:!0,duration:400,autoPlay:!0,startIndex:1,fadeOutAnimation:!0,mouseDragEnabled:!0,playButtonEnabled:!0,autoPlayInterval:2e3,autoPlayDirection:"ltr",autoPlayActionDisabled:!0},a.map((function(t,a){return s.a.createElement("div",{className:"hero-carousel"},s.a.createElement("div",{className:"slide".concat(a+1," slide"),style:{backgroundImage:"url(".concat(t.heroCoverUrl?t.heroCoverUrl:"",")")}},s.a.createElement("div",{className:"text-inside-slide"},s.a.createElement("div",{className:"slide-upper-text-container"},s.a.createElement("div",{className:"slide-title"},t.title),s.a.createElement("div",{className:"slide-genres"},t.genres.map((function(e,a){return s.a.createElement("div",{key:t._id,className:"genre".concat(a+1)},e)}))),s.a.createElement("div",{className:"slide-btns"},s.a.createElement(c.Link,{to:"/room/".concat(t._id)},s.a.createElement("div",{className:"slide-btn1 slide-btn"},"watch movie")),s.a.createElement(c.Link,{to:"/movie/".concat(t._id),className:"slide-btn-style slide-btn"},s.a.createElement("div",{className:"slide-btn2 "},"view info")),s.a.createElement("div",{className:"slide-btn3 slide-btn",onClick:function(){n(t)}},"favoriteBtnStyle"!==r(t)?s.a.createElement(c.Link,null,s.a.createElement("i",{className:"fas fa-plus"})):s.a.createElement(c.Link,null,s.a.createElement("i",{className:"fas fa-check"})),"add to favorite"))),s.a.createElement("div",{className:"slide-rate"},e.changeRateToStars(t))),s.a.createElement("div",{className:"text-inside-slide2"},s.a.createElement("div",{className:"info-in-slide"}))))}))))}}]),a}(n.Component)),ae=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"onSlideChange",value:function(e){console.log("Item`s position during a change: ",e.item),console.log("Slide`s position during a change: ",e.slide)}},{key:"onSlideChanged",value:function(e){console.log("Item`s position after changes: ",e.item),console.log("Slide`s position after changes: ",e.slide)}},{key:"render",value:function(){var e=this.props.movies;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee.a,{duration:400,startIndex:1,fadeOutAnimation:!0,mouseDragEnabled:!0,playButtonEnabled:!0,responsive:{0:{items:1},350:{items:3},720:{items:3},1e3:{items:4},1290:{items:5}},autoPlayInterval:2e3,autoPlayDirection:"ltr",autoPlayActionDisabled:!0,onSlideChange:this.onSlideChange,onSlideChanged:this.onSlideChanged,className:"alice-carousel",id:"top-carousel"},e.slice(10,20).map((function(e,t){return s.a.createElement(c.Link,{to:"/movie/".concat(e._id)},s.a.createElement("div",{key:e._id,className:"carousel-card"},s.a.createElement("div",{className:"movie-img-container"},s.a.createElement("div",{className:"movie-img",style:{backgroundImage:"url(".concat(e.coverUrl?e.coverUrl:"",")")}})),s.a.createElement("div",{className:"top-number ".concat(9===t?"last-child":"")},t+1)))}))))}}]),a}(n.Component),ne=a(79),se=a.n(ne),re=a(172),ie=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).responseGoogle=function(t){var a={email:t.profileObj.email,avatar:t.profileObj.imageUrl,username:t.profileObj.givenName};e.props.loginByGoogle(a),console.log("loggedInUser:",e.props.loggedInUser),e.props.closeModal()},e}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(re.GoogleLogin,{clientId:"866960241942-jhfvtsh6b7adl5jae5cth72jlhug4i72.apps.googleusercontent.com",buttonText:"Login With Google",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"}))}}]),a}(n.Component),oe={loginByGoogle:function(e){return function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.loginByGoogle(e);case 2:n=t.sent,a({type:"SET_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},ce=Object(o.b)((function(e){return{users:e.user.users,loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),oe)(ie),le=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={msg:"",loginCred:{email:"",password:""},signupCred:{email:"",password:"",username:""},section:!0},e.loginHandleChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState((function(e){return{loginCred:Object(g.a)(Object(g.a)({},e.loginCred),{},Object(v.a)({},n,s))}}))},e.signupHandleChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState((function(e){return{signupCred:Object(g.a)(Object(g.a)({},e.signupCred),{},Object(v.a)({},n,s))}}))},e.doLogin=function(){var t=Object(E.a)(f.a.mark((function t(a){var n,s,r,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.loginCred,s=n.email,r=n.password,s&&r){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter user/password"}));case 4:i={email:s,password:r},e.props.login(i),e.setState({loginCred:{email:"",password:""}}),e.props.closeModal();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.doSignup=function(){var t=Object(E.a)(f.a.mark((function t(a){var n,s,r,i,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.signupCred,s=n.email,r=n.password,i=n.username,s&&r&&i){t.next=4;break}return t.abrupt("return",e.setState({msg:"All inputs are required!"}));case 4:o={email:s,password:r,username:i},e.props.signup(o),e.setState({signupCred:{email:"",password:"",username:""}}),e.props.closeModal();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeUser=function(t){e.props.removeUser(t)},e.onSignup=function(){e.setState({section:!e.state.section})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=s.a.createElement("form",{onSubmit:this.doSignup,className:"signup-container"},s.a.createElement("input",{className:"login-input",type:"text",name:"email",value:this.state.signupCred.email,onChange:this.signupHandleChange,placeholder:"Email"}),s.a.createElement("br",null),s.a.createElement("input",{className:"login-input",name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password"}),s.a.createElement("br",null),s.a.createElement("input",{className:"login-input",type:"text",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username",maxlength:"10"}),s.a.createElement("br",null),s.a.createElement("button",{className:"login-btn"},"Signup")),t=s.a.createElement("form",{onSubmit:this.doLogin,className:"login-container"},s.a.createElement("input",{className:"login-input",type:"text",name:"email",value:this.state.loginCred.email,onChange:this.loginHandleChange,placeholder:"Email"}),s.a.createElement("br",null),s.a.createElement("input",{className:"login-input",type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),s.a.createElement("br",null),s.a.createElement("button",{className:"login-btn"},"Login")),a=this.props.loggedInUser;return s.a.createElement(s.a.Fragment,null,s.a.createElement(se.a,{canvasClassName:"example",params:{particles:{number:{value:160,density:{enable:!1}},size:{value:3,random:!0,anim:{speed:4,size_min:.3}},line_linked:{enable:!1},move:{random:!0,speed:1,direction:"top",out_mode:"out"}},interactivity:{events:{onhover:{enable:!0,mode:"bubble"},onclick:{enable:!0,mode:"repulse"}},modes:{bubble:{distance:250,duration:2,size:0,opacity:0},repulse:{distance:400,duration:4}}}}}),s.a.createElement("div",{className:"login-page"},s.a.createElement("button",{className:"close-modal",onClick:this.props.closeModal},"x"),s.a.createElement("h1",{className:"login-title"},s.a.createElement("div",{className:"welcome-txt ".concat(this.props.addFavMovieTxt?"hide-txt":"")},s.a.createElement("div",null,"Welcome"),s.a.createElement("div",{className:"welcome-txt2"},"Sign in with your email address")),s.a.createElement("div",{className:"guest-addFav-txt ".concat(this.props.addFavMovieTxt?"":"hide-txt")},s.a.createElement("div",{className:"guest-addFav-center-txt"},"Add to favorites"),s.a.createElement("div",{className:"guest-addFav-bigger-txt"},"Before you can do that..."),s.a.createElement("div",null,"Sign in or register with your email address"))),s.a.createElement("h2",{className:"mag"},this.state.msg),s.a.createElement("div",{className:"auth-form"},!a&&this.state.section?t:e,s.a.createElement("div",{className:"login-txt"},"".concat(this.state.section?"DON'T HAVE ACCOUNT YET?":"")," "),s.a.createElement("div",{className:"google-oauth"},s.a.createElement(ce,{className:"google-oauth-btn",closeModal:this.props.closeModal})),s.a.createElement("div",{className:"login-txt-btn",onClick:this.onSignup},"".concat(this.state.section?"Signup Here":"Go Back"))),s.a.createElement("hr",null)))}}]),a}(n.Component),me={login:function(e){return function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.login(e);case 2:n=t.sent,a({type:"SET_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:W,signup:function(e){return function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.signup(e);case 2:n=t.sent,a({type:"SET_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},removeUser:function(e){return function(){var t=Object(E.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.remove(e);case 3:a({type:"USER_REMOVE",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},loadUsers:B},ue=Object(o.b)((function(e){return{users:e.user.users,loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),me)(le),de=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isShown:!0},e.closeModal=function(){e.setState({isShown:!1}),e.props.onOpenModal()},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.isShown;return s.a.createElement("div",{className:"modal-wrapper ".concat(e?"":"hide"),onClick:this.closeModal},s.a.createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()}},s.a.createElement(ue,{closeModal:this.closeModal})))}}]),a}(s.a.Component),pe=a(65),ve=a.n(pe);function ge(e){var t=e.className,a=e.style,n=e.onClick;return s.a.createElement("div",{className:"".concat(t," slick-next-btn-style"),style:Object(g.a)({},a),onClick:n})}function he(e){var t=e.className,a=e.style,n=e.onClick;return s.a.createElement("div",{className:"".concat(t," slick-prev-btn-style"),style:Object(g.a)({},a),onClick:n})}var fe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.movies,a=e.isFavoriteMovie,n=e.toggleFavoriteList,r=e.avgReview,i={nextArrow:s.a.createElement(ge,null),prevArrow:s.a.createElement(he,null),speed:500,slidesToShow:8,slidesToScroll:3,initialSlide:0,swipeToSlide:!0,responsive:[{breakpoint:1160,settings:{slidesToShow:8,slidesToScroll:3}},{breakpoint:1024,settings:{slidesToShow:7,slidesToScroll:3}},{breakpoint:990,settings:{slidesToShow:6,slidesToScroll:2}},{breakpoint:870,settings:{slidesToShow:5,slidesToScroll:2,initialSlide:0}},{breakpoint:730,settings:{slidesToShow:4,slidesToScroll:1,initialSlide:0}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:1,initialSlide:0}},{breakpoint:420,settings:{slidesToShow:3,slidesToScroll:2}}]};return s.a.createElement(s.a.Fragment,null,s.a.createElement(ve.a,i,t.slice(0,11).map((function(e){return s.a.createElement("div",{key:e._id,className:"home-new-movie-container"},s.a.createElement(c.Link,{to:"/movie/".concat(e._id),className:"new-movie-img-container",style:{backgroundImage:"url(".concat(e.coverUrl?e.coverUrl:"",")")}}),s.a.createElement("div",{className:"info-continer-movie-card"},s.a.createElement("div",{className:"title ".concat(e.title.length>11?"ellipsis":"")},e.title),s.a.createElement("div",{className:"genres-container"},e.genres.map((function(e,t){return s.a.createElement("div",{key:t,className:"genre"},e)}))),s.a.createElement("div",{className:"btns-container"},s.a.createElement("span",{className:"movie-btn movie-btn-details"},s.a.createElement(c.Link,{to:"/movie/".concat(e._id)},s.a.createElement("i",{className:"fas fa-info-circle"}))),s.a.createElement("span",{className:"movie-btn"},s.a.createElement(c.Link,{to:"/room/".concat(e._id)},s.a.createElement("i",{className:"far fa-play-circle"}))),s.a.createElement("span",{className:"movie-btn",onClick:function(){n(e)}},"favoriteBtnStyle"!==a(e)?s.a.createElement(c.Link,null,s.a.createElement("i",{className:"fas fa-plus"})):s.a.createElement(c.Link,null,s.a.createElement("i",{className:"fas fa-check"})))),s.a.createElement("div",{className:"rate-container"},s.a.createElement("div",null,s.a.createElement("i",{className:"far fa-eye"}),e.viewersNumber?e.viewersNumber:Math.floor(150*Math.random()+50)),"\u2b50 ",r(e),"/10")))}))))}}]),a}(n.Component),Ee=a(21),ye=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={filterBy:{search:"",minYear:-1/0,maxYear:1/0,type:"All"},showComponent:!1,innerWidth:null,desktopExample:null},e.handleResize=function(){e.setState({innerWidth:window.innerWidth})},e.toggleFavoriteList=function(t){e.props.loggedInUser?(console.log("loggedInUser.favMovies:",e.props.loggedInUser.favMovies),e.props.toggleFavUserList(e.props.loggedInUser,t),console.log("favoriteList:",e.props.favoriteList)):e.onOpenModal()},e.isFavoriteMovie=function(t){return e.props.loggedInUser&&e.props.loggedInUser.favMovies.find((function(e){return e._id===t._id}))?"favoriteBtnStyle":""},e.handleInputs=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(g.a)(Object(g.a)({},e.state),{},{filterBy:Object(g.a)(Object(g.a)({},e.state.filterBy),{},Object(v.a)({},a,n))}),(function(){e.props.loadMovies(e.state.filterBy)}))},e.avgReview=function(e){var t=0,a=0;return e.reviews?(e.reviews.forEach((function(e){e.rating&&(t+=parseInt(e.rating),a++)})),(t/a).toFixed(1)):0},e.toggleFavoriteList=function(t){e.props.loggedInUser?e.props.toggleFavUserList(e.props.loggedInUser,t):e.onOpenModal()},e.isFavoriteMovie=function(t){return e.props.loggedInUser&&e.props.loggedInUser.favMovies.find((function(e){return e._id===t._id}))?"favoriteBtnStyle":""},e.onOpenModal=function(){e.setState({showComponent:!e.state.showComponent})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.loadMovies(this.state.filterBy),q.a.init({}),window.scrollTo(0,0),window.addEventListener("resize",this.handleResize),window.innerWidth>414?this.setState({desktopExample:!0}):this.setState({desktopExample:!1})}},{key:"componentWillUnmount",value:function(){var e={search:"",minYear:-1/0,maxYear:1/0,type:"All"};this.setState({filterBy:e}),window.removeEventListener("resize",this.handleResize)}},{key:"getHeroMoviesForDisplay",value:function(){return this.props.movies.filter((function(e){return"Wrath of the Titans"===e.title||"Guardians of the Galaxy"===e.title||"Avengers: Endgame"===e.title||"IT"===e.title}))}},{key:"componentDidUpdate",value:function(e,t){t.innerWidth!==this.state.innerWidth&&(this.setState({innerWidth:window.innerWidth}),window.innerWidth>414?this.setState({desktopExample:!0}):this.setState({desktopExample:!1}))}},{key:"render",value:function(){var e=this,t=this.props.movies,a=this.getHeroMoviesForDisplay();if(!t)return s.a.createElement("div",null,"Loading....");var n=t.filter((function(e){return"X-Men: Dark Phoenix"===e.title||"21 Bridges"===e.title||"Hellboy"===e.title||"Avatar"===e.title}));return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null),s.a.createElement("div",{className:"movie-app",id:"top"},s.a.createElement("div",{className:"main-header-container"},s.a.createElement("div",{className:"hero-slider"},s.a.createElement(te,{movies:a,toggleFavoriteList:this.toggleFavoriteList,isFavoriteMovie:this.isFavoriteMovie,onOpenModal:this.onOpenModal,avgReview:this.avgReview}))),s.a.createElement("div",{className:"main-movies-section"},s.a.createElement("div",{className:"Streaming-section1"},s.a.createElement("div",null,"So How Does It Work..."),s.a.createElement("div",{className:"explantion-btn","data-aos":"fade-right"},s.a.createElement(Ee.HashLink,{to:"/#example"},s.a.createElement("button",null,"Click Here")),s.a.createElement("span",null),s.a.createElement("span",null))),s.a.createElement("div",{className:"live-cinema-section"},this.state.desktopExample&&s.a.createElement("div",{className:"live-movie-example"},s.a.createElement("div",{className:"img-example"},s.a.createElement("img",{className:"laptop-blank",src:"assets/img/laptop-blank.png",alt:""}),s.a.createElement("video",{className:"home-video",loop:!0,autoPlay:!0,muted:!0},s.a.createElement("source",{src:"assets/img/video.mp4",type:"video/mp4"})),s.a.createElement("img",{className:"chat-img2",src:"assets/img/chat-img2.png",alt:""})),s.a.createElement("div",{className:"movie-example"},s.a.createElement("div",{className:"main-title"},s.a.createElement("div",null,"WATCH WHATEVER, TOGETHER")),s.a.createElement("div",{className:"main-title2"},"Connect with others who are as obsessed with your favorite movies as you are. Come together for watch parties, chat about your favorite shows and movies, and discover your next binge."),s.a.createElement("div",{className:"title"},s.a.createElement("i",null," Streaming Live Now")))),!this.state.desktopExample&&s.a.createElement("div",{className:"live-section-title"},s.a.createElement("i",null," Streaming Live Now")),s.a.createElement("div",{className:"live-rooms-container"},s.a.createElement("div",{className:"watch-container"},n.map((function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("div",{className:"live-tag"},s.a.createElement("i",null,"Live")),s.a.createElement(Y,{className:"watch-movie",movie:t}),s.a.createElement("div",{className:"watch-movie-details"},s.a.createElement("div",{className:"title ".concat(t.title.length>11?"ellipsis":"")},s.a.createElement("div",null,t.title)),s.a.createElement("div",{className:"details"},s.a.createElement("span",{className:"details-genre"},s.a.createElement("i",null,t.genres[2]))),s.a.createElement("div",null,s.a.createElement(Ee.HashLink,{to:"/movie/".concat(t._id)},s.a.createElement("i",{className:"fas fa-info-circle"}))),s.a.createElement("div",{className:"watching-details"},s.a.createElement("div",null,s.a.createElement(K.a,{className:"faRegEye icon-style"}),t.viewersNumber?t.viewersNumber:Math.floor(1500*Math.random()+500)),s.a.createElement("div",null,s.a.createElement(Z.a,{className:"icon-style"}),e.avgReview(t),"/10"))))}))))),s.a.createElement("div",{className:"new-movies"},s.a.createElement("div",{className:"movies-title"},"New Movies in WatChat"),s.a.createElement(fe,{movies:t,toggleFavoriteList:this.toggleFavoriteList,isFavoriteMovie:this.isFavoriteMovie,avgReview:this.avgReview})),s.a.createElement("div",{className:"top-movies"},s.a.createElement("div",{className:"movies-title"},"TOP 10"),s.a.createElement("div",{className:"home-top-movies-container"},s.a.createElement(ae,{movies:t}))),s.a.createElement("div",{className:"editors-movies module-border-wrap"},s.a.createElement("div",{className:"editors-title"},"EDITOR'S CHOICE"),s.a.createElement("div",{className:"home-choices-container"},s.a.createElement("div",{className:"side-img-container2"},s.a.createElement("div",null),s.a.createElement("img",{className:"img-hr10",src:"assets/img/hr10.png",alt:""}),s.a.createElement("div",{className:"info-container"},s.a.createElement(Ee.HashLink,{to:"/editor-movies/editors-adventure/#top"},s.a.createElement("div",null,"SEE ALL ",s.a.createElement("span",{className:"number-style"},"6"))),s.a.createElement(Ee.HashLink,{to:"/movies/Adventure"},s.a.createElement("div",null,"Adventure")))),t.slice(8,12).map((function(t){return s.a.createElement("div",{key:t._id,className:"home-choice-container"},s.a.createElement(Ee.HashLink,{to:"/movie/".concat(t._id),className:"img-container",style:{backgroundImage:"url(".concat(t.coverUrl?t.coverUrl:"",")")}}),s.a.createElement("div",{className:"title-btns-container"},s.a.createElement("div",{className:"title ".concat(t.title.length>11?"ellipsis":"")},t.title),s.a.createElement("div",{className:"btns-container"},s.a.createElement(Ee.HashLink,{to:"/movie/".concat(t._id)},s.a.createElement("span",{className:"movie-btn movie-btn-details"},s.a.createElement("i",{className:"fas fa-info-circle"}))),s.a.createElement(Ee.HashLink,{to:"/room/".concat(t._id)},s.a.createElement("span",{className:"movie-btn"},s.a.createElement("i",{className:"far fa-play-circle"}))),s.a.createElement(Ee.HashLink,null,s.a.createElement("span",{className:"movie-btn",onClick:function(){e.toggleFavoriteList(t)}},"favoriteBtnStyle"!==e.isFavoriteMovie(t)?s.a.createElement("i",{className:"fas fa-plus"}):s.a.createElement("i",{className:"fas fa-check"}))))))})))),s.a.createElement("div",{className:"editors-movies2 module-border-wrap"},s.a.createElement("div",{className:"home-choices-container3"},s.a.createElement("div",{className:"side-img-container3"},s.a.createElement("div",null),s.a.createElement("img",{className:"img-hr10",src:"assets/img/hr12.png",alt:""}),s.a.createElement("div",{className:"info-container"},s.a.createElement(Ee.HashLink,{to:"/editor-movies/editors-action/#top"},s.a.createElement("div",null,"SEE ALL ",s.a.createElement("span",{className:"number-style"},"6"))),s.a.createElement(Ee.HashLink,{to:"/movies/Action"},s.a.createElement("div",null,"Action")))),t.slice(12,16).map((function(t){return s.a.createElement("div",{key:t._id,className:"home-choice-container"},s.a.createElement(Ee.HashLink,{to:"/movie/".concat(t._id),className:"img-container",style:{backgroundImage:"url(".concat(t.coverUrl?t.coverUrl:"",")")}}),s.a.createElement("div",{className:"title-btns-container"},s.a.createElement("div",{className:"title ".concat(t.title.length>11?"ellipsis":"")},t.title),s.a.createElement("div",{className:"btns-container"},s.a.createElement(Ee.HashLink,{to:"/movie/".concat(t._id)},s.a.createElement("span",{className:"movie-btn movie-btn-details"},s.a.createElement("i",{className:"fas fa-info-circle"}))),s.a.createElement(Ee.HashLink,{to:"/room/".concat(t._id)},s.a.createElement("span",{className:"movie-btn"},s.a.createElement("i",{className:"far fa-play-circle"}))),s.a.createElement(Ee.HashLink,null,s.a.createElement("span",{className:"movie-btn",onClick:function(){e.toggleFavoriteList(t)}},"favoriteBtnStyle"!==e.isFavoriteMovie(t)?s.a.createElement("i",{className:"fas fa-plus"}):s.a.createElement("i",{className:"fas fa-check"}))))))})))),s.a.createElement("div",{className:"editors-movies2 module-border-wrap"},s.a.createElement("div",{className:"home-choices-container2"},s.a.createElement("div",{className:"side-img-container2"},s.a.createElement("div",null),s.a.createElement("img",{className:"img-hr10",src:"assets/img/hr13.png",alt:""}),s.a.createElement("div",{className:"info-container"},s.a.createElement(Ee.HashLink,{to:"/editor-movies/editors-horror/#top"},s.a.createElement("div",null,"SEE ALL ",s.a.createElement("span",{className:"number-style"},"6"))),s.a.createElement(Ee.HashLink,{to:"/movies/Horror"},s.a.createElement("div",null,"Horror")))),t.slice(16,20).map((function(t){return s.a.createElement("div",{key:t._id,className:"home-choice-container"},s.a.createElement(Ee.HashLink,{to:"/movie/".concat(t._id),className:"img-container",style:{backgroundImage:"url(".concat(t.coverUrl?t.coverUrl:"",")")}}),s.a.createElement("div",{className:"title-btns-container"},s.a.createElement("div",{className:"title ".concat(t.title.length>11?"ellipsis":"")},t.title),s.a.createElement("div",{className:"btns-container"},s.a.createElement(Ee.HashLink,{to:"/movie/".concat(t._id)}," ",s.a.createElement("span",{className:"movie-btn movie-btn-details"},s.a.createElement("i",{className:"fas fa-info-circle"}))),s.a.createElement(Ee.HashLink,{to:"/room/".concat(t._id)},s.a.createElement("span",{className:"movie-btn"},s.a.createElement("i",{className:"far fa-play-circle"}))),s.a.createElement(Ee.HashLink,null,s.a.createElement("span",{className:"movie-btn",onClick:function(){e.toggleFavoriteList(t)}},"favoriteBtnStyle"!==e.isFavoriteMovie(t)?s.a.createElement("i",{className:"fas fa-plus"}):s.a.createElement("i",{className:"fas fa-check"}))))))})))),!this.state.desktopExample&&s.a.createElement("div",{className:"live-movie-example"},s.a.createElement("div",{className:"img-example"},s.a.createElement("img",{className:"laptop-blank",src:"assets/img/laptop-blank.png",alt:""}),s.a.createElement("video",{className:"home-video",loop:!0,autoPlay:!0,muted:!0},s.a.createElement("source",{src:"assets/img/video.mp4",type:"video/mp4"})),s.a.createElement("img",{className:"chat-img2",src:"assets/img/chat-img2.png",alt:""})),s.a.createElement("div",{className:"movie-example"},s.a.createElement("div",{className:"main-title"},s.a.createElement("div",null,"WATCH WHATEVER, TOGETHER")),s.a.createElement("div",{className:"main-title2"},"Connect with others who are as obsessed with your favorite movies as you are. Come together for watch parties, chat about your favorite shows and movies, and discover your next binge."))),s.a.createElement("div",null,s.a.createElement("div",{className:"example-imgs",id:"example"},s.a.createElement("div",{className:"example-img1"},s.a.createElement("div",{className:"example-img",style:{backgroundImage:"url(assets/img/example/choose-movie.jpg)"}}),s.a.createElement("div",null,"choose a movie to stream")),s.a.createElement("div",{className:"example-img2"},s.a.createElement("div",{className:"example-img",style:{backgroundImage:"url(assets/img/example/send-link.jpg)"}}),s.a.createElement("div",null,"Send a link to your friends")),s.a.createElement("div",{className:"example-img3"},s.a.createElement("div",{className:"example-img",style:{backgroundImage:"url(assets/img/example/watch-together.jpg)"}}),s.a.createElement("div",null,"Watch and chat together")))),s.a.createElement("div",{className:"got-to-top-button"},s.a.createElement(Ee.HashLink,{to:"/#top"},s.a.createElement("button",null,s.a.createElement($.a,{className:"bsArrowUp"}))),s.a.createElement("span",null),s.a.createElement("span",null)))),this.state.showComponent?s.a.createElement(de,{onOpenModal:this.onOpenModal}):null)}}]),a}(n.Component),ke={loadMovies:M,logout:W,toggleFavUserList:z},we=Object(o.b)((function(e){return{movies:e.movie.movies,loggedInUser:e.user.loggedInUser,favoriteList:e.movie.favoriteList}}),ke)(ye),be=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"about-page"},s.a.createElement("div",{className:"description-section"},s.a.createElement("div",null,s.a.createElement("span",{className:"gradient-text"},"WatChat")," is a virtual movie theater where you and your friends can watch movies and chat together."),s.a.createElement("div",null,"You can tag, send gifts to each other and play/pause movie are synchronized to everyone."),s.a.createElement("div",null,"Choose a movie and send a link to your friends.")),s.a.createElement("div",{className:"developer-section"},s.a.createElement("div",null," This project was created by ",s.a.createElement("span",{className:"gradient-text"},s.a.createElement("a",{target:"_blank",href:"https://www.linkedin.com/in/mili-malzev-310ab3182/"},"Mili Malzev")),"."),s.a.createElement("div",null,"Project Repository ",s.a.createElement("a",{href:"https://github.com/mili12321/watchat",target:"_blank"},s.a.createElement("i",{class:"fab fa-github"})))),s.a.createElement("div",{className:"tools-section"},s.a.createElement("div",null,"Tools used in this project:"),s.a.createElement("div",null,"React"),s.a.createElement("div",null,"SCSS"),s.a.createElement("div",null,"Node.js"),s.a.createElement("div",null,"Socket.io")),s.a.createElement("div",{className:"sceenshots"},s.a.createElement("div",null,s.a.createElement("div",{className:"phone-container"},s.a.createElement("img",{class:"blank-phone",src:"assets/img/screenshots/blank-screen-device/phone.png",alt:""}),s.a.createElement("img",{className:"img2",alt:"",src:"../assets/img/screenshots/from mobile/3.png"}))),s.a.createElement("div",{className:"computer-container"},s.a.createElement("img",{class:"blank-comp",src:"assets/img/screenshots/blank-screen-device/blank-d.png",alt:""}),s.a.createElement("img",{className:"img1",alt:"",src:"../assets/img/screenshots/desktop/cap21-d.PNG"})),s.a.createElement("img",{className:"img3",alt:"",src:"../assets/img/screenshots/movies-p2.PNG"}),s.a.createElement("img",{className:"img4",alt:"",src:"../assets/img/screenshots/movies-p.PNG"}))))}}]),a}(n.Component),Ne=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isShown:!0},e.closeModal=function(){e.setState({isShown:!1}),e.props.onOpenModal()},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.isShown,t=this.props,a=t.children,n=t.updateMovie;return s.a.createElement("div",{className:"modal-wrapper ".concat(e?"":"hide"),onClick:this.closeModal},s.a.createElement("div",{className:"review-modal-content",onClick:function(e){return e.stopPropagation()}},s.a.createElement("form",{onSubmit:n,className:"review-form"},a,s.a.createElement("button",{className:"review-submit-btn"},"Continue"))))}}]),a}(s.a.Component),je=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={movie:null,showComponent:!1,showReviewComponent:!1,favoriteBtn:!1,reviewToEdit:{txt:"",byUser:"",rating:""},isRate:!1,activeRateCount:0,prevActiveRateCount:0,fullDescription:!1,innerHeight:null,innerWidth:null},e.updateDimensions=function(){e.setState({innerWidth:window.innerWidth,innerHeight:window.innerHeight})},e.handleChange=function(t){var a=t.target,n=a.name,s=a.value;e.props.loggedInUser?e.setState((function(t){var a;return{reviewToEdit:Object(g.a)(Object(g.a)({},t.reviewToEdit),{},(a={},Object(v.a)(a,n,s),Object(v.a)(a,"byUser",e.props.loggedInUser.username),a))}})):e.setState((function(e){var t;return{reviewToEdit:Object(g.a)(Object(g.a)({},e.reviewToEdit),{},(t={},Object(v.a)(t,n,s),Object(v.a)(t,"byUser","GUEST"),t))}}))},e.updateMovie=function(t){if(t.preventDefault(),!e.state.reviewToEdit.rating)return console.log(" rating required"),void e.setState({isRate:!0});e.state.movie.reviews.push(e.state.reviewToEdit),e.props.updateMovie(e.state.movie),e.setState({reviewToEdit:{txt:""}}),e.onOpenReviewModal()},e.avgReview=function(){var t=0,a=0;return e.state.movie.reviews?(e.state.movie.reviews.forEach((function(e){e.rating&&(t+=parseInt(e.rating),a++)})),(t/a).toFixed(1)):0},e.isFavoriteMovie=function(t){return e.props.loggedInUser&&e.props.loggedInUser.favMovies.find((function(e){return e._id===t._id}))?"favoriteBtnStyle":""},e.toggleFavoriteList=function(t){e.props.loggedInUser?e.props.toggleFavUserList(e.props.loggedInUser,t):e.onOpenModal()},e.onOpenModal=function(){e.setState({showComponent:!e.state.showComponent})},e.onOpenReviewModal=function(){e.setState({showReviewComponent:!e.state.showReviewComponent}),e.setState({activeRateCount:0})},e.selectRate=function(t){e.setState({prevActiveRateCount:e.state.activeRateCount},(function(){})),e.setState({reviewToEdit:Object(g.a)(Object(g.a)({},e.state.reviewToEdit),{},{rating:t})}),e.setState({activeRateCount:t},(function(){console.log("activeRateCount:",e.state.activeRateCount)})),e.setState({isRate:!1})},e.getRatingActiveStars=function(){for(var t=[],a=function(a){t.push(s.a.createElement("i",{key:a,className:"fa fa-star rating-star star".concat(a," rating-active"),onClick:function(){e.selectRate(a)}}))},n=1;n<=e.state.activeRateCount;n++)a(n);for(var r=function(a){t.push(s.a.createElement("i",{key:a,className:"fa fa-star rating-star star".concat(a," "),onClick:function(){e.selectRate(a)}}))},i=e.state.activeRateCount+1;i<11;i++)r(i);return t},e.backgroundImagePosition=function(e){return e.title.includes("Ice Age 3")?"ice-age-img-position":e.title.includes("21 Bridges")?"bridges-img-position":void 0},e.onGetReviewTxt=function(e){if(e.length>22)return"word-break"},e.longDescription=function(t){if(t.length>225&&e.state.innerWidth<415||t.length>378&&e.state.innerHeight<415)return e.state.fullDescription?"long-description":"ellipsis-description"},e.overviewRef=s.a.createRef(),e.toggleDescription=function(){e.setState({fullDescription:!e.state.fullDescription},(function(){e.state.fullDescription||e.overviewRef.current.scrollIntoView()}))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadMovie(),window.scrollTo(0,0),window.addEventListener("resize",this.updateDimensions),this.setState({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"loadMovie",value:function(){var e=Object(E.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,_.getById(t);case 3:a=e.sent,this.setState({movie:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderTitleColor",value:function(e){switch(e){case"The Equalizer":case"The last stand":return"dark-title-on-background";default:return"light-title-on-background"}}},{key:"renderInfoColor",value:function(e){switch(e){case"The Equalizer":case"The last stand":case"X-Men: Apocalypse":case"Hellboy":return"dark-info-on-background";default:return"light-info-on-background"}}},{key:"render",value:function(){var e=this,t=this.state.movie;return t?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"movie-details"},s.a.createElement("div",{className:"details-hero-container  ".concat(this.backgroundImagePosition(t)),style:{backgroundImage:"url(".concat(t.wideCoverUrl?t.wideCoverUrl:"",")")}},s.a.createElement("div",{className:"details-hero-info-container ".concat(t.title.length>27?"long-title":"")},s.a.createElement("div",{className:"details-hero-title ".concat(this.renderTitleColor(t.title)," ").concat(t.title.length>27?"long-title":"")},t.title),s.a.createElement("div",{className:"details-hero-info ".concat(this.renderInfoColor(t.title))},s.a.createElement("div",{className:"details year"},t.year),s.a.createElement("div",{className:"details duration"},t.duration)),s.a.createElement("div",{className:"details-hero-btns"},s.a.createElement(c.Link,{to:"/room/".concat(t._id)},s.a.createElement("div",{className:"details-hero-btn play-btn"},"Play")),s.a.createElement("div",{className:"details-hero-btn my-list-btn ".concat(this.isFavoriteMovie(t)),onClick:function(){e.toggleFavoriteList(t)}},"favoriteBtnStyle"!==this.isFavoriteMovie(t)?s.a.createElement("span",{className:"list-btn-symble"},"+"):s.a.createElement("span",{className:"list-btn-symble"},s.a.createElement("i",{className:"fas fa-check"})),s.a.createElement("span",null," My List")))),s.a.createElement("div",{className:"scenes-container"},t.scenesUrl.map((function(e){return s.a.createElement("div",{className:"scene-img-container",style:{backgroundImage:"url(".concat(e,")")}})})))),s.a.createElement("section",{className:"details-more-info-section"},s.a.createElement("div",{className:"description-container"},s.a.createElement("div",{className:"overview-title",ref:this.overviewRef},"Overview"),s.a.createElement("div",{className:"genres-title"},"Genres"),s.a.createElement("div",{className:"overview-txt ".concat(this.longDescription(t.description))},s.a.createElement("p",{className:"overview-description ".concat(this.state.fullDescription?"open":"")},t.description)),s.a.createElement("div",{className:"genres-txt"},t.genres.map((function(e){return s.a.createElement("div",null,e)})))),(this.state.innerWidth<414&&t.description.length>225||t.description.length>378&&this.state.innerHeight<415)&&s.a.createElement("div",{className:"toggle-long-description",onClick:this.toggleDescription},this.state.fullDescription?"Read Less":"Read More"),s.a.createElement("div",{className:"cast-continer"},s.a.createElement("div",{className:"cast-title"},"Cast"),s.a.createElement("div",{className:"actors"},t.cast.map((function(e,t){return s.a.createElement("div",{className:"actor-container actor-".concat(t+1)},s.a.createElement("img",{className:"actor-img",src:"".concat(e.img),alt:""}),s.a.createElement("div",{className:"actor-info-container"},s.a.createElement("div",{className:"actor-name"},s.a.createElement("span",null,e.name.split(" ")[0]),s.a.createElement("span",null," ",e.name.split(" ")[1])),s.a.createElement("div",{className:"actor-character"},e.character)))}))))),s.a.createElement("section",{className:"reviews-container"},s.a.createElement("div",{className:"reviews-title"},s.a.createElement("div",null,s.a.createElement("div",null,"Reviews"),s.a.createElement("div",{className:"reviews-count"},"(",t.reviews?t.reviews.length:0," Reviews)")),s.a.createElement("div",{className:"number-style avg-number"},"\u2b50",this.avgReview(),"/10"),s.a.createElement("button",{className:"colorful-button dark add-review-btn",onClick:this.onOpenReviewModal},s.a.createElement("div",{className:"wrapper"},s.a.createElement("span",null,"Add Review"),s.a.createElement("div",{className:"circle circle-12"}),s.a.createElement("div",{className:"circle circle-11"}),s.a.createElement("div",{className:"circle circle-10"}),s.a.createElement("div",{className:"circle circle-9"}),s.a.createElement("div",{className:"circle circle-8"}),s.a.createElement("div",{className:"circle circle-7"}),s.a.createElement("div",{className:"circle circle-6"}),s.a.createElement("div",{className:"circle circle-5"}),s.a.createElement("div",{className:"circle circle-4"}),s.a.createElement("div",{className:"circle circle-3"}),s.a.createElement("div",{className:"circle circle-2"}),s.a.createElement("div",{className:"circle circle-1"})))),s.a.createElement("div",{className:"reviews-section"},this.state.showReviewComponent?s.a.createElement(Ne,{onOpenModal:this.onOpenReviewModal,updateMovie:this.updateMovie},s.a.createElement("div",{className:"form-container"},s.a.createElement("div",{className:"form-title"},"Your Rating"),s.a.createElement("div",{className:"rating-star-section"},this.getRatingActiveStars()),this.state.isRate&&s.a.createElement("div",{className:"rate-msg"},s.a.createElement("i",{className:"fas fa-exclamation"})," Please select rate"),s.a.createElement("div",{className:"form-title"},"Your Review"),s.a.createElement("textarea",{className:"review-textarea",placeholder:"Give us some detail about what you liked and disliked about the movie",cols:"30",rows:"5",name:"txt",onChange:this.handleChange,value:this.state.reviewToEdit.txt}))):null,t.reviews&&t.reviews.map((function(t){return s.a.createElement("table",{className:"reviews-table"},s.a.createElement("tr",{className:"reviews-tr"},s.a.createElement("th",{className:"reviews-th th-letter"},t.byUser?t.byUser.substring(0,1):"Guest".substring(0,1)),s.a.createElement("th",{className:"reviews-th th-name"},s.a.createElement("div",null,s.a.createElement("span",{className:"reviews-th-name"},t.byUser?t.byUser:"Guest"),s.a.createElement("span",null,"\u2b50",t.rating,"/10")))),s.a.createElement("tr",{className:"reviews-tr"},s.a.createElement("td",{className:"reviews-td"}),s.a.createElement("td",{className:"reviews-td"},s.a.createElement("div",{className:"td-txt"},t.txt.split(" ").map((function(t){return s.a.createElement("span",{className:e.onGetReviewTxt(t)},t,s.a.createElement("span",null," "))}))))))}))))),this.state.showComponent?s.a.createElement(de,{onOpenModal:this.onOpenModal}):null):s.a.createElement("div",null,"Loading....")}}]),a}(n.Component),Se={toggleFavUserList:z,updateMovie:T,updateUser:H},Ue=Object(o.b)((function(e){return{movies:e.movie.movies,loggedInUser:e.user.loggedInUser,favoriteList:e.movie.favoriteList,reviews:e.review.reviews}}),Se)(je),Ce={add:function(e){return Oe.apply(this,arguments)},query:function(e){console.log("movieId",e);var t=e?"?movieId=".concat(e,"&sort=anaAref"):"";return b("review".concat(t||""))},remove:function(e){return S("review/".concat(e))}};function Oe(){return(Oe=Object(E.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("review",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _e={uploadImg:function(e){return xe.apply(this,arguments)}};function xe(){return(xe=Object(E.a)(f.a.mark((function e(t){var a,n,s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dzvebcsrp",a="https://api.cloudinary.com/v1_1/".concat("dzvebcsrp","/image/upload"),(n=new FormData).append("file",t.target.files[0]),n.append("upload_preset","mister_toy"),e.prev=5,e.next=8,fetch(a,{method:"POST",body:n});case 8:return s=e.sent,e.next=11,s.json();case 11:return r=e.sent,console.log(r.secure_url),console.log("data.secure_url"),e.abrupt("return",r);case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])})))).apply(this,arguments)}var Me,Te=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={imgUrl:"",name:""},e.onUploadImg=function(){var t=Object(E.a)(f.a.mark((function t(a){var n,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,_e.uploadImg(a);case 3:n=t.sent,s=n.secure_url,console.log("onUploadImg -> imgUrl",s),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{imgUrl:s}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleInput=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(g.a)(Object(g.a)({},e.state),{},Object(v.a)({},a,n)))},e.onSave=function(t){t.preventDefault();var a=Object(g.a)(Object(g.a)({},e.props.loggedInUser),{},{username:e.state.name,avatar:e.state.imgUrl});e.props.updateUser(a),e.props.closeModal()},e.removeFromFavList=function(t,a){e.props.loggedInUser&&(t.stopPropagation(),e.props.toggleFavUserList(e.props.loggedInUser,a))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.loggedInUser?(this.setState({imgUrl:this.props.loggedInUser.avatar,name:this.props.loggedInUser.username}),console.log("this.props.loggedInUser",this.props.loggedInUser)):this.props.history.goBack()}},{key:"render",value:function(){var e=this.props.loggedInUser,t=this.state.imgUrl;return e?s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{className:"user-details-form",onSubmit:this.onSave},s.a.createElement("div",{className:"user-avatar"},s.a.createElement("div",{style:{backgroundImage:"url(".concat(t,")")}}),s.a.createElement("label",{className:"custom-file-upload"},s.a.createElement("input",{onChange:this.onUploadImg,type:"file"}),"Upload Image")),s.a.createElement("div",{className:"username"},s.a.createElement("div",null," Change your username:"),s.a.createElement("input",{value:this.state.name,onChange:this.handleInput,type:"text",name:"name"})),s.a.createElement("button",{onClick:this.onSave},"Save Changes"))):s.a.createElement("div",null,"Loading....")}}]),a}(n.Component),Le={loadReviews:function(e){return function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ce.query(e);case 3:n=t.sent,a({type:"SET_REVIEWS",reviews:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ReviewActions: err in loadReviews",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateUser:H,toggleFavUserList:z},Ie=Object(o.b)((function(e){return{movies:e.movie.movies,loggedInUser:e.user.loggedInUser,users:e.user.users,reviews:e.review.reviews}}),Le)(Te),Fe=a(175),Re=a.n(Fe),Ae=a(176),Ge=a.n(Ae),Ve={setup:function(){Me=Ge.a.connect("/")},terminate:function(){Me=null},on:function(e,t){console.log("ON SOCKET EVENT"),Me.on(e,t)},off:function(e,t){Me.off(e,t)},emit:function(e,t){Me.emit(e,t)},broadcast:function(e,t){Me.broadcast.emit(e,t)}};var De=a(35),Pe=(a(516),a(180)),Be=a(523),We=a(524),He=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"toolbar ".concat(this.props.fullScreenChatBackground())},s.a.createElement("div",{className:"user-count toolbar-icon",onClick:this.props.onGoBack},s.a.createElement("i",{className:"fas fa-home",size:"20px"})),s.a.createElement("div",{className:"add-user toolbar-icon",onClick:this.props.onShare},s.a.createElement("a",{href:"whatsapp://send?text=".concat(window.location.href," Watch ").concat(this.props.movie.title," Together With Friends!"),"data-action":"share/whatsapp/share",target:"_blank",rel:"noopener noreferrer"},s.a.createElement(De.f,{size:"20px"}))))}}]),a}(n.Component),ze=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isSelected:!1,userPosition:["20%","40%","60%","80%"],posX:0},e.previewRef=s.a.createRef(),e.onUserToggle=function(){if(e.props.user.username!==e.props.currUser.username){e.setState({isSelected:!e.state.isSelected});var t=e.previewRef.current;e.setState({posX:t.getBoundingClientRect().left+25}),console.log("posX:",e.state.posX),setTimeout((function(){e.setState({isSelected:!1})}),5e3)}},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{ref:this.previewRef,className:"user-preview",style:{width:"50px"}},s.a.createElement("div",{className:"user-menu-icons ".concat(this.state.isSelected?"":"hidden")},s.a.createElement("span",{className:"user-icon tag-user",onClick:function(){e.props.onUsernameSelect(e.props.user)}}," "),s.a.createElement("span",{onClick:function(){return e.props.sendGift("drink",e.state.posX,e.props.user)},className:"user-icon drink"}),s.a.createElement("span",{onClick:function(){return e.props.sendGift("kiss",e.state.posX,e.props.user)},className:"user-icon kiss"}),s.a.createElement("span",{onClick:function(){return e.props.sendGift("small-popcorn",e.state.posX,e.props.user)},className:"user-icon small-popcorn"})),s.a.createElement("div",{className:"user-avatar",onClick:this.onUserToggle},s.a.createElement("img",{src:this.props.user.avatar?this.props.user.avatar:"https://res.cloudinary.com/dl5mlxukz/image/upload/v1601299626/samples/default-avatar_smehur.png",alt:""})),s.a.createElement("div",{className:"user-name",onClick:function(){e.props.onUsernameSelect(e.props.user)}},this.props.user.username===this.props.currUser.username?"".concat(this.props.currUser.username,"(Me)"):this.props.user.username))}}]),a}(n.Component),Xe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.users;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee.a,{mouseTracking:!0,responsive:{0:{items:4},400:{items:4},600:{items:5},700:{items:6},800:{items:3},1400:{items:4},1600:{items:5}}},t.map((function(t,a){return s.a.createElement(ze,{key:t._id,gift:e.props.gift,sendGift:e.props.sendGift,socketInfo:e.props.socketInfo,user:t,userIdx:a,currUser:e.props.currUser,onUsernameSelect:e.props.onUsernameSelect,ref:function(t){return e.Carousel=t}})}))))}}]),a}(n.Component),Ye=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={filterBy:{search:"",minYear:-1/0,maxYear:1/0,type:"All"}},e.handleInputs=function(t){var a=t.target.name,n=t.target.value;n?e.props.toggleView("FilteredMovie"):e.props.toggleView("main"),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{filterBy:Object(g.a)(Object(g.a)({},e.state.filterBy),{},Object(v.a)({},a,n))}),(function(){e.props.loadMovies(e.state.filterBy)}))},e.onClearSearch=function(){e.inputField.value="",e.props.toggleView("main")},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.loadMovies(this.state.filterBy)}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,"movie"===this.props.searchingValue&&s.a.createElement("form",{className:"navlink-search"},s.a.createElement("div",{className:"search-input-container"},s.a.createElement("input",{placeholder:"Search Movie",name:"search",autoComplete:"off",onChange:this.handleInputs,type:"search",ref:function(t){return e.inputField=t},onFocus:function(){return e.inputField.value=""}}),s.a.createElement("div",{className:"search",onClick:function(){e.onClearSearch()}}))),"user"===this.props.searchingValue&&s.a.createElement("form",{className:"navlink-search"},s.a.createElement("div",{className:"search-input-container"},s.a.createElement("input",{onChange:this.props.handleInput,type:"search",name:"name",autocomplete:"off",placeholder:"Search user",ref:function(t){return e.inputField=t},onFocus:function(){return e.inputField.value=""}}),s.a.createElement("div",{className:"search",onClick:function(){e.props.onClearInput("")}}))))}}]),a}(n.Component),Je={loadMovies:M},qe=Object(o.b)((function(e){return{movies:e.movie.movies,loggedInUser:e.user.loggedInUser}}),Je)(Ye),Ke=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={showComponent:!1,color:"",active:"",location:""},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setState({active:"home"}),this.setState({location:window.location.href})}},{key:"componentWillUnmount",value:function(){this.setState({active:""})}},{key:"changeToActiveBtn",value:function(e){this.setState({active:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"mobile-toolbar"},s.a.createElement("div",{className:"toolbar-btns"},s.a.createElement("div",{className:"home nav-column ".concat("home"===this.state.active?"active-navLink":"")},s.a.createElement(c.NavLink,{className:"navlink-btn toolbar-btn",to:"/",onClick:function(){e.changeToActiveBtn("home")}},s.a.createElement("i",{className:"fas fa-home"}))),s.a.createElement("div",{className:"add-user toolbar-icon"},s.a.createElement("a",{href:"whatsapp://send?text="+encodeURIComponent(window.location.href),target:"_blank",rel:"noopener noreferrer"},s.a.createElement(De.f,{size:"25px"}))),s.a.createElement("div",{className:"toolbar-search"},s.a.createElement(qe,{searchingValue:"user",handleInput:this.props.handleInput,onClearInput:this.props.onClearInput})),s.a.createElement("div",{className:"total-users-mobile"},s.a.createElement(De.b,{size:"25px",color:"white"}),this.props.users.length)))}}]),a}(n.Component),Ze=Object(o.b)((function(e){return{loggedInUser:e.user.loggedInUser}}))(Object(p.o)(Ke)),$e=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={currPage:0,currSearch:"",innerWidth:null},e.getUsersForDisplay=function(){var t=4,a=e.props.users.findIndex((function(t){return t._id===e.props.currUser._id}));a>0&&(e.props.users.splice(a,1),e.props.users.unshift(e.props.currUser));var n=parseInt(window.innerWidth);n<=500&&(t=1),n>500&&n<=900&&(t=2),n>900&&n<=1100&&(t=3);var s=e.state.currPage*t;return e.props.users.slice(s,s+t)},e.onMoveRight=function(){4*(e.state.currPage+1)<e.props.users.length&&e.setState((function(e){return{currPage:e.currPage+1}}))},e.onMoveLeft=function(){e.state.currPage>0&&e.setState((function(e){return{currPage:e.currPage-1}}))},e.handleInput=function(t){e.setState({currSearch:t.target.value})},e.onClearInput=function(t){e.setState({currSearch:t})},e.handleResize=function(){e.setState({innerWidth:window.innerWidth})},e}return Object(m.a)(a,[{key:"getFileredUsersForDisplay",value:function(){var e=this;return this.state.currSearch?this.props.users.filter((function(t){return t.username.toLowerCase().includes(e.state.currSearch.toLowerCase())})):this.props.users}},{key:"componentDidUpdate",value:function(e,t){t.innerWidth!==this.state.innerWidth&&this.props.onChangeUserListAndChatToVisible()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this.getFileredUsersForDisplay();return s.a.createElement("div",{className:"\n      user-list-container \n      ".concat(this.props.fullScreenChatBackground(),"\n      ").concat(this.props.isVisible?"show-user-list-animation":"hide-user-list-animation","\n      ")},s.a.createElement("div",{className:"watch-room-users-container"},s.a.createElement(Xe,{users:e,gift:this.props.gift,sendGift:this.props.sendGift,socketInfo:this.props.socketInfo,currUser:this.props.currUser,onUsernameSelect:this.props.onUsernameSelect})),s.a.createElement("input",{onChange:this.handleInput,type:"text",name:"name",autocomplete:"off",placeholder:"Search user",className:"search-user-input"}),s.a.createElement(Ze,{onShare:this.props.onShare,movie:this.props.movie,users:e,handleInput:this.handleInput,onClearInput:this.onClearInput,onGoBack:this.props.onGoBack}),s.a.createElement(He,{onShare:this.props.onShare,movie:this.props.movie,fullScreenChatBackground:this.props.fullScreenChatBackground,isFullScreen:this.props.isFullScreen,toggleFullScreen:this.props.toggleFullScreen,onGoBack:this.props.onGoBack}),s.a.createElement("div",{className:"user-list ".concat(this.props.fullScreenChatBackground())},s.a.createElement(Be.a,{mode:"out-in"},s.a.createElement(We.a,{key:this.state.currPage,addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)},classNames:"fade"},s.a.createElement("div",{className:"users-container"},this.getUsersForDisplay().length<1?s.a.createElement("h1",null,"Loading..."):s.a.createElement(Xe,{users:e,gift:this.props.gift,sendGift:this.props.sendGift,socketInfo:this.props.socketInfo,currUser:this.props.currUser,onUsernameSelect:this.props.onUsernameSelect})))),s.a.createElement("span",{className:"total-users"},s.a.createElement(De.b,{size:"15px",color:"white"})," ",this.props.users.length)))}}]),a}(n.Component),Qe={loadUsers:B},et=Object(o.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),Qe)($e),tt=[{name:":meow_party:",short_names:["meow"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1563480763/5999/meow_party.gif?1563480763",customCategory:"Gif"},{name:":party_parrot:",short_names:["party_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1471119458/990/party_parrot.gif?1471119458",customCategory:"Gif"},{name:":aww-yeah:",short_names:["yeah"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1488512507/1804/aaw_yeah.gif?1488512507",customCategory:"Gif"},{name:":ban_dance:",short_names:["banana"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1450694616/220/bananadance.gif?1450694616",customCategory:"Gif"},{name:":meow_heart:",short_names:["meow_heart"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1596061862/9845/meow_heart.png?1596061862",customCategory:"Gif"},{name:":meow_popcorn:",short_names:["meow_popcorn"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1568064900/6383/meow-popcorn.gif?1568064900",customCategory:"Gif"},{name:":sad:",short_names:["fbsad"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1594314837/9661/fbsad.gif?1594314837",customCategory:"Gif"},{name:":nice:",short_names:["nice"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1599588897/10418/nice.png?1599588897",customCategory:"Png"},{name:":wow:",short_names:["fbwow"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1594314885/9662/fbwow.gif?1594314885",customCategory:"Gif"},{name:":hearteyes:",short_names:["heart"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340467/4971/hearteyes.gif?1542340467",customCategory:"Gif"},{name:":party:",short_names:["party"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340469/4975/party.gif?1542340469",customCategory:"Gif"},{name:":facepalm:",short_names:["facepalm"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340464/4967/facepalm.gif?1542340464",customCategory:"Gif"},{name:":anger:",short_names:["anger"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340458/4962/anger.gif?1542340458",customCategory:"Gif"},{name:":watching-you:",short_names:["watching-you"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340473/4982/watching-you.gif?1542340473",customCategory:"Gif"},{name:":blush:",short_names:["blush"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340460/4963/blush.gif?1542340460",customCategory:"Gif"},{name:":yuck:",short_names:["yuck"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340473/4983/yuck.gif?1542340473",customCategory:"Gif"},{name:":giggle:",short_names:["giggle"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340466/4970/giggle.gif?1542340466",customCategory:"Gif"},{name:":watch:",short_names:["watching"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340473/4982/watching-you.gif?1542340473",customCategory:"Gif"},{name:":shh:",short_names:["shh"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340470/4977/shhh.gif?1542340470",customCategory:"Gif"},{name:":lol:",short_names:["lol"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340468/4973/lol.gif?1542340468",customCategory:"Gif"},{name:":flyingkiss:",short_names:["kiss"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1542340465/4969/flying-kiss.gif?1542340465",customCategory:"Gif"},{name:":alert:",short_names:["alert"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1497901371/2453/alert.gif?1497901371",customCategory:"Gif"},{name:":pika:",short_names:["pika"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1579216111/7550/pikachu_wave.gif?1579216111",customCategory:"Gif"},{name:":angel_parrot:",short_names:["angel_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1578626548/7489/angel_parrot.gif?1578626548",customCategory:"Gif"},{name:":a-parrot:",short_names:["a-parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1512661804/3258/a-parrot.gif?1512661804",customCategory:"Gif"},{name:":bunny_parrot:",short_names:["bunny_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1597609843/10048/bunny_parrot.gif?1597609843",customCategory:"Gif"},{name:":everythings_fine_parrot:",short_names:["everythings_fine_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1597609852/10064/everythings_fine_parrot.gif?1597609852",customCategory:"Gif"},{name:":doc_parrot:",short_names:["doc_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1597609852/10063/doc_parrot.gif?1597609852",customCategory:"Gif"},{name:":evil_parrot:",short_names:["evil_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1597609852/10065/evil_parrot.gif?1597609852",customCategory:"Gif"},{name:":headbanging_parrot:",short_names:["headbanging_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1597609860/10080/headbanging_parrot.gif?1597609860",customCategory:"Gif"},{name:":hypno_parrot_dark:",short_names:["hypno_parrot_dark"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1597609863/10086/hypno_parrot_dark.gif?1597609863",customCategory:"Gif"},{name:":popcorn_parrot:",short_names:["popcorn_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1495224267/2309/popcorn_parrot.gif?1495224267",customCategory:"Gif"},{name:":unicorn_parrot:",short_names:["unicorn_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1597609906/10161/unicorn_parrot.gif?1597609906",customCategory:"Gif"},{name:":troll-parrot:",short_names:["troll-parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1533926586/4455/troll-parrot.gif?1533926586",customCategory:"Gif"},{name:":ultra_fast_parrot:",short_names:["ultra_fast_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1597609906/10160/ultra_fast_parrot.gif?1597609906",customCategory:"Gif"},{name:":thegrokeparrot:",short_names:["thegrokeparrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1567421610/6303/thegrokeparrot.gif?1567421610",customCategory:"Gif"},{name:":among_us_party:",short_names:["among_us_party"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1605479284/10796/among_us_party.gif?1605479284",customCategory:"Gif"},{name:":party_blob:",short_names:["party_blob"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1547582922/5197/party_blob.gif?1547582922",customCategory:"Gif"},{name:":ahhhhhhhhh:",short_names:["ahhhhhhhhh"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1558099591/5711/ahhhhhhhhh.gif?1558099591",customCategory:"Gif"},{name:":among_us_orange_dance:",short_names:["among_us_orange_dance"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1605722420/11386/among_us_orange_dance.gif?1605722420",customCategory:"Gif"},{name:":crewmate:",short_names:["crewmate"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1605479278/11110/crewmate.gif?1605479278",customCategory:"Gif"},{name:":among_us_dead:",short_names:["among_us_dead"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1605479285/10741/among_us_dead.png?1605479285",customCategory:"Png"},{name:":among_us_voted:",short_names:["among_us_voted"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1605479301/11160/among_us_voted.png?1605479301",customCategory:"Png"},{name:":nightking:",short_names:["nightking"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1555301698/5612/nightking.png?1555301698",customCategory:"Png"},{name:":johnsnow:",short_names:["johnsnow"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1555301587/5608/johnsnow.png?1555301587",customCategory:"Png"},{name:":daenery:",short_names:["daenery"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1555301439/5604/daenery.png?1555301439",customCategory:"Png"},{name:":cersei:",short_names:["cersei"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1555301396/5603/cersei.png?1555301396",customCategory:"Png"},{name:":nyancat_big:",short_names:["nyancat_big"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1450458551/184/nyancat_big.gif?1450458551",customCategory:"Gif"},{name:":eevee:",short_names:["eevee"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1479080836/1363/eevee.gif?1479080836",customCategory:"Gif"},{name:":vaporeon:",short_names:["vaporeon"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1479081197/1368/vaporeon.gif?1479081197",customCategory:"Gif"},{name:":jolteon:",short_names:["jolteon"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1479080759/1360/jolteon.gif?1479080759",customCategory:"Gif"},{name:":espeon:",short_names:["espeon"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1479080869/1364/espeon.gif?1479080869",customCategory:"Gif"},{name:":mewtwo:",short_names:["mewtwo"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1450736076/242/mewtwo.png?1450736076",customCategory:"Png"},{name:":poke_pika_wink:",short_names:["poke_pika_wink"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1472722300/1128/poke_pika_wink.png?1472722300",customCategory:"Png"},{name:":kirby:",short_names:["kirby"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1450716258/223/kirby.gif?1450716258",customCategory:"Gif"},{name:":coin:",short_names:["coin"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1490884029/1971/coin.gif?1490884029",customCategory:"Gif"},{name:":baby-yoda:",short_names:["baby-yoda"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1575297777/7233/baby-yoda.png?1575297777",customCategory:"Png"},{name:":storm_trooper:",short_names:["storm_trooper"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1526741134/3958/storm_trooper.gif?1526741134",customCategory:"Gif"},{name:":baby-yoda-soup:",short_names:["baby-yoda-soup"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1575409644/7248/baby-yoda-soup.gif?1575409644",customCategory:"Gif"},{name:":baby_yoda:",short_names:["baby-yoda"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1591793668/9336/baby-yoda.gif?1591793668",customCategory:"Gif"},{name:":love:",short_names:["love"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1492722354/2080/love.gif?1492722354",customCategory:"Gif"},{name:":sheepy:",short_names:["sheepy"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1450319441/5/sheepy.gif?1450319441",customCategory:"Gif"},{name:":kermit_typing:",short_names:["kermit_typing"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1608026376/11743/kermit_typing.gif?1608026376",customCategory:"Gif"},{name:":smudge:",short_names:["smudge"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1606826279/11557/smudge.png?1606826279",customCategory:"Png"},{name:":holy-poop:",short_names:["holy-poop"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1594751185/9689/holy-poop.png?1594751185",customCategory:"Png"},{name:":rage-poop:",short_names:["rage-poop"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1526489538/3928/rage-poop.png?1526489538",customCategory:"Png"},{name:":goldpoop:",short_names:["goldpoop"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1565740433/6175/goldpoop.png?1565740433",customCategory:"Png"},{name:":poop_fire:",short_names:["poop_fire"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1559173484/5752/poop_fire.gif?1559173484",customCategory:"Gif"},{name:":trolldance:",short_names:["trolldance"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1477057420/1271/trolldance.gif?1477057420",customCategory:"Gif"},{name:":troll:",short_names:["troll"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1463602125/429/troll.png?1463602125",customCategory:"Png"},{name:":coronavirus:",short_names:["coronavirus"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1582658942/7898/coronavirus.png?1582658942",customCategory:"Png"},{name:":corona-virus:",short_names:["coronavirus"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1580374434/7652/coronavirus.png?1580374434",customCategory:"Png"},{name:":corona-highfive:",short_names:["corona-highfive"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1600175068/10466/corona-highfive.gif?1600175068",customCategory:"Gif"},{name:":corona_virus:",short_names:["coronavirus"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1583409623/7970/coronavirus.png?1583409623",customCategory:"Png"},{name:":corona_party:",short_names:["corona_party"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1592398908/9398/corona_party.gif?1592398908",customCategory:"Gif"},{name:":angry_trump:",short_names:["angry_trump"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1450319451/91/angry_trump.jpg?1450319451",customCategory:"Png"},{name:":viking_parrot:",short_names:["viking_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1597609908/10164/viking_parrot.gif?1597609908",customCategory:"Gif"},{name:":zouk_parrot:",short_names:["zouk_parrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1597609915/10178/zouk_parrot.gif?1597609915",customCategory:"Gif"},{name:":jumping_parrot_jr:",short_names:["jumping_parrot_jr"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1597609868/10095/jumping_parrot_jr.gif?1597609868",customCategory:"Gif"},{name:":virusparrot:",short_names:["virusparrot"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1583753108/8026/virusparrot.png?1583753108",customCategory:"Png"},{name:":cr_angry:",short_names:["cr_angry"],text:"",emoticons:[],keywords:["slack"],imageUrl:"https://emojis.slackmojis.com/emojis/images/1563480734/5984/cr_angry.gif?1563480734",customCategory:"Gif"}],at=a(53),nt=a.n(at),st=a(177),rt=[{type:"",from:"Angela",to:"",txt:"Seriously? How did he do that...",nameColor:"purple",senderId:"10001"},{type:"",from:"David Bowie",to:"",txt:"lets rock!! :headbanging_parrot:",nameColor:"red",senderId:"10002"},{type:"",from:"M.Jackson",to:"",nameColor:"darkgreen",txt:"wow this movie is **** :yuck:",senderId:"10003"},{type:"",from:"Angela",to:"",nameColor:"purple",txt:" :lol: ",senderId:"10001"},{type:"",from:"Christy",to:"",nameColor:"darkorange",txt:"I know what will happen next",senderId:"10005"},{type:"",from:"Sandra",nameColor:"brown",to:"",txt:"no spoilers please! :rage-poop: :watching-you: ",senderId:"10004"}],it=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={currUser:null,msg:{type:"",from:"",to:"",txt:"",senderId:"",user:null,sendedMsg:""},msgList:[],users:[],giftName:"",showGift:"",showRecivedGift:"",showRecivedMsg:"",giftPosition:"",socketInfo:[],gift:{},gifts:[],msgForUser:{},msgsFromUsers:[],popupVisible:!1},e.inputRef=s.a.createRef(),e.scrollBarRef=s.a.createRef(),e.handleClick=function(){e.state.popupVisible?(document.removeEventListener("click",e.handleOutsideClick,!1),e.props.onAnabelToggleUserList()):(document.addEventListener("click",e.handleOutsideClick,!1),e.props.onDisableToggleUserList()),e.setState((function(e){return{popupVisible:!e.popupVisible}}))},e.handleOutsideClick=function(t){e.node.contains(t.target)?e.props.onDisableToggleUserList():e.handleClick()},e.rotatedGiftTxt=function(e){switch(e.name){case"kiss":return"XOXO".split("");case"drink":return"Drink on me!".split("");case"small-popcorn":return"What's Poppin?".split("");default:return""}},e.setupSockets=function(){Ve.emit("chat room",{roomId:e.props.roomId,user:e.props.currUser}),Ve.on("chat room",(function(t,a,n){e.setState({users:t}),e.state.currUser||e.setState({currUser:a},(function(){})),e.props.onAddNewUser(t,a,n)})),Ve.on("chat",(function(t){e.setState({msgList:[].concat(Object(y.a)(e.state.msgList),[t])})})),Ve.on("remove-user",(function(t,a){if(e.setState({users:t}),console.log("users remain",t),t.length<1){var n=e.props.movie;n.msgList=[],e.props.updateMovie(n)}})),Ve.on("receive-gift",(function(t){e.setState({gift:{_gift:t,showRecivedGift:!0}});var a=Object(g.a)(Object(g.a)({},t),{},{id:nt()(),showRecivedGift:!0});e.setState({gifts:[].concat(Object(y.a)(e.state.gifts),[a])},(function(){setTimeout((function(){var t=e.state.gifts.filter((function(e){return e.id!==a.id}));e.setState({gifts:t})}),5500)}))})),Ve.on("receive-msg",(function(t){var a={txt:t.txt,from:t.from,to:t.to,sendedMsg:t.sendedMsg,id:nt()(),showRecivedMsg:!0};e.setState({msgForUser:a}),e.setState({msgsFromUsers:[].concat(Object(y.a)(e.state.msgsFromUsers),[a])},(function(){setTimeout((function(){var t=e.state.msgsFromUsers.filter((function(e){return e.id!==a.id}));e.setState({msgsFromUsers:t})}),1e4)}))}))},e.cleanUp=function(){e.state.currUser&&Ve.emit("remove-user",{userId:e.state.currUser._id,userRoom:e.props.roomId,movie:e.props.movie}),Ve.terminate()},e.onMsgSend=function(){""!==e.state.msg.txt&&e.sendMsg()},e.onMsgEnter=function(t){"Enter"===t.key&&""!==e.state.msg.txt&&e.sendMsg()},e.sendMsg=function(){var t=e.state.msg;t.from=e.state.currUser.username,t.senderId=e.state.currUser._id,Ve.emit("chat",t),e.props.onUpdateMovieMsgList(t),"@"===e.state.msg.txt.charAt(0)&&Ve.emit("receive-msg",{from:e.state.currUser,user:e.state.msg.user,txt:e.state.msg.txt,sendedMsg:e.state.msg.sendedMsg,to:e.state.msg.to}),e.removeMsg(),e.props.hideEmojis()},e.closeMsg=function(t){var a=e.state.msgsFromUsers.filter((function(e){return e.id!==t.id}));e.setState({msgsFromUsers:a})},e.onMsgInput=function(t){var a=e.state.msg;a.txt=t.target.value,e.setState({msg:a})},e.onEmojiSelect=function(t){var a=e.state.msg;t.native?(a.txt+=t.native,e.setState({msg:a})):(a.txt+=t.name,e.setState({msg:a})),e.props.onDisableToggleUserList()},e.onUsernameSelect=function(t){if(t._id!==e.state.currUser._id){var a=e.inputRef.current;a.value="@"+t.username+" ";var n={to:t.username,txt:a.value,user:t};e.setState({msg:n}),a.focus()}},e.ReplyToSender=function(t,a){if(t._id!==e.state.currUser._id){var n=e.inputRef.current;n.value="@"+t.username+" ";var s={to:t.username,txt:n.value,user:t,sendedMsg:a};e.setState({msg:s}),n.focus()}},e.sendGift=function(t,a,n){e.setState({giftName:t,showGift:!0,giftPosition:a});var s={user:n,giftName:t,sender:e.state.currUser};Ve.emit("receive-gift",{gift:s}),setTimeout((function(){e.setState({showGift:!1})}),2e3)},e.removeMsg=function(){e.setState({privateMsg:{isPrivate:!1,to:""}}),e.setState({msg:{type:"",from:"",to:"",txt:""}})},e.replaceWithGif=function(t){var a=t=e.replaceWithTagName(t);return tt.forEach((function(e){for(var t="\n      <img src=".concat(e.imageUrl," className='gif-img'></img>\n    "),n="\n      <img src=".concat(e.imageUrl," className='gif-img gif-img-trolldance'></img>\n    "),s="";a!==s;){s=a;var r=e.name;a=":trolldance:"===r?a.replace(r,n):a.replace(r,t)}})),a},e.replaceWithTagName=function(t){var a=t;return e.state.users.forEach((function(e){var t="<span className='name-tag'>".concat(e.username,"</span>"),n=e.username;a=a.replace(n,t)})),a},e.scrollDown=function(){var t=e.scrollBarRef.current;t&&t.scrollToBottom()},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.cleanUp),this.props.currUser&&this.setState({currUser:this.props.currUser}),this.setupSockets(),this.setState({msgList:[].concat(Object(y.a)(rt),Object(y.a)(this.props.movie.msgList))}),this.scrollDown()}},{key:"componentWillUnmount",value:function(){this.cleanUp(),Ve.terminate(),window.removeEventListener("beforeunload",this.cleanUp)}},{key:"componentDidUpdate",value:function(){this.scrollDown()}},{key:"render",value:function(){var e=this;return this.state.currUser?s.a.createElement(s.a.Fragment,null,this.state.msgsFromUsers.map((function(t){return s.a.createElement("div",{className:"msgForUser ".concat(t.showRecivedMsg?"slide-left":"hidden")},t.sendedMsg&&s.a.createElement("div",{className:"old-msg"},s.a.createElement("span",null,"About:"),s.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.replaceWithGif(t.sendedMsg.slice(t.to.length+1))}})),s.a.createElement("div",{className:"new-msg"},s.a.createElement("div",{className:"sender-avatar-container"},s.a.createElement("div",{className:"sender-avatar",style:{backgroundImage:"url(".concat(t.from.avatar?t.from.avatar:"",")")}})),s.a.createElement("div",{className:"sender-msg-container"},s.a.createElement("div",{className:"sender-msg-name"},t.from.username),s.a.createElement("div",{className:"sender-msg-txt",dangerouslySetInnerHTML:{__html:e.replaceWithGif(t.txt.slice(t.to.length+1))}}))),s.a.createElement("div",{className:"reply-btn",onClick:function(){e.ReplyToSender(t.from,t.txt)}},"Reply"),s.a.createElement("div",{className:"close-msg",onClick:function(){e.closeMsg(t)}},"X"))})),this.state.gifts.map((function(t){return t.showRecivedGift?s.a.createElement("div",{className:"recived-gift sended-gift sended-".concat(t.name," ").concat(t.showRecivedGift?"start-animation":"hidden")},s.a.createElement("h1",null,e.rotatedGiftTxt(t).map((function(e,t){return s.a.createElement("span",{className:"char char-".concat(t+1),key:t},e)}))),s.a.createElement("div",{className:"gift-sender"},s.a.createElement("div",{className:"avatar-container"},s.a.createElement("div",{className:"avatar-img",style:{backgroundImage:"url(".concat(t.sender.avatar?t.sender.avatar:"",")")}})),s.a.createElement("div",{className:"name"},t.sender.username))):""})),s.a.createElement("section",{className:"chat ".concat(this.props.fullScreenChat())},s.a.createElement(et,{socketInfo:this.state.socketInfo,msgForUser:this.state.msgForUser,movie:this.props.movie,sendGift:this.sendGift,users:this.state.users,currUser:this.state.currUser,onUsernameSelect:this.onUsernameSelect,fullScreenChatBackground:this.props.fullScreenChatBackground,isFullScreen:this.props.isFullScreen,toggleFullScreen:this.props.toggleFullScreen,onGoBack:this.props.onGoBack,isVisible:this.props.isVisible,onChangeUserListAndChatToVisible:this.props.onChangeUserListAndChatToVisible}),s.a.createElement("div",{className:"chat-window ".concat(window.innerWidth>813?this.props.fullScreenChatBackground():"")},this.props.showParticles&&s.a.createElement(se.a,{canvasClassName:"chat-particles",params:{particles:{number:{value:160,density:{enable:!0,value_area:800}},color:{value:"#f01548"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:1,random:!0,anim:{enable:!0,speed:1,opacity_min:0,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:4,size_min:.3,sync:!1}},line_linked:{enable:!1,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:1,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:600}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"bubble"},onclick:{enable:!0,mode:"repulse"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:250,size:0,duration:2,opacity:0,speed:3},repulse:{distance:400,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0}}),s.a.createElement("div",{className:"chat-box ".concat(this.props.isVisible?"":"expand-chat-box"),ref:function(t){e.node=t},onClick:this.props.onToggleUserList},s.a.createElement(st.a,{className:"".concat(this.props.isChatVisible?"show-chat-animation":"hide-chat-animation"),ref:this.scrollBarRef,style:{color:"red",direction:"rtl"}},this.state.msgList.map((function(t){return s.a.createElement("div",{key:nt()(),style:{direction:"ltr"},className:"msg-container ".concat(e.state.currUser&&t.senderId===e.state.currUser._id?"left":"right","-msg ").concat(e.props.fullScreenMsg())},s.a.createElement("div",{className:" chat-msg from-".concat(e.state.currUser&&t.senderId===e.state.currUser._id?"me":"user"," ").concat(e.state.currUser&&t.senderId===e.state.currUser._id?e.props.fullScreenMessageMe():e.props.fullScreenMessageUser()),key:nt()()},s.a.createElement("div",{className:"msg-sender"},e.state.currUser&&t.senderId===e.state.currUser._id?"Me":t.from),s.a.createElement("div",{className:"msg-content",dangerouslySetInnerHTML:{__html:e.replaceWithGif(t.txt)}})))}))),s.a.createElement("div",{className:"gift ".concat(this.state.showGift?this.state.giftName:"hidden"),style:{left:"".concat(this.state.giftPosition,"px")}}),this.state.popupVisible&&s.a.createElement("div",{className:"emojis"},s.a.createElement(Pe.a,{style:{width:"100%"},custom:tt,theme:"light",perLine:6,showPreview:!1,showSkinTones:!1,onSelect:this.onEmojiSelect,exclude:["flags","symbols","nature","search","places","objects","activity"],emojiTooltip:!0}))),s.a.createElement("div",{className:"\n              chat-input \n              ".concat(this.props.fullScreenInput(),"\n              ").concat(this.props.isChatVisible?"show-input-animation":"hide-input-animation","\n          ")},s.a.createElement("input",{ref:this.inputRef,type:"text",value:this.state.msg.txt,placeholder:"Type a message",onChange:this.onMsgInput,onKeyPress:this.onMsgEnter,onFocus:this.props.hideEmojis}),s.a.createElement("div",{className:"input-icon ".concat(""===this.state.msg.txt?"":"msg-content")},s.a.createElement(De.e,{size:"20px",onClick:this.onMsgSend})),s.a.createElement("div",{className:"input-icon emoji ".concat(this.props.showEmojis?"selected":""),onClick:this.handleClick},s.a.createElement(De.a,{size:"20px"})))))):s.a.createElement("div",null,"Loading...")}}]),a}(n.Component),ot=Object(o.b)((function(e){return{loggedInUser:e.user.loggedInUser}}))(it),ct=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={reactions:["like","heart","angry","sad","wow","lol"]},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.onSelectReaction;return s.a.createElement("div",{className:"reactions-menu"},this.state.reactions.map((function(t,a){return s.a.createElement("span",{key:a,className:"reaction ".concat(t),onClick:function(){e(t)}})})))}}]),a}(s.a.Component),lt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={showVolume:!1,showReactions:!1,reactions:[],reactionIds:[],clickedOutsideVolume:!1,myReaction:!1},e.volumeRef=s.a.createRef(),e.handleClickOutside=function(t){e.volumeRef.current.contains(t.target)||(e.setState({clickedOutsideVolume:!1}),e.props.onChangeDisableToggleUserList())},e.handleClickInsideVolume=function(){e.setState({clickedOutsideVolume:!e.state.clickedOutsideVolume}),e.props.onToggleDisableToggleUserList(),(window.innerHeight<415||window.innerWidth<415)&&setTimeout((function(){e.setState({clickedOutsideVolume:!1})}),3e3)},e.onSelectReaction=function(t){var a={id:nt()(),type:t,posX:e.getRandomNum(5,8)};e.setState({reactions:[].concat(Object(y.a)(e.state.reactions),[a])});var n=e.props.newUser;Ve.emit("reactions",{newReaction:a,user:n}),setTimeout((function(){Ve.emit("reaction-delete",a.id)}),2e3),e.removeReaction(a.id)},e.getRandomNum=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.removeReaction=function(t){var a=e.state.reactions;a=a.filter((function(e){return e.id!==t})),e.setState({reactions:a})},e.onToggleReactions=function(){e.setState({showReactions:!e.state.showReactions})},e.hideReactions=function(){e.setState({showReactions:!1})},e.changeVolume=function(t){e.props.onVolumeChange(t.target.value),(window.innerHeight<415||window.innerWidth<415)&&setTimeout((function(){e.setState({clickedOutsideVolume:!1})}),2500)},e.onVolumeToggle=function(){e.setState({showVolume:!e.state.showVolume})},e.hideVolume=function(){e.setState({showVolume:!1})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;Ve.on("reactions",(function(t){e.setState({reactions:[].concat(Object(y.a)(e.state.reactions),[t])})})),Ve.on("reaction-delete",(function(t){e.removeReaction(t)})),document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){this.setState({reactions:[]}),document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){return s.a.createElement("div",{className:"control-panel ".concat(this.props.fullScreenControlPanel())},s.a.createElement("div",{className:"reactions",onClick:this.onToggleReactions},s.a.createElement("div",{className:"reactions-container\n            ".concat(this.state.showReactions?"":"hidden","\n             ")},s.a.createElement(ct,{hideReactions:this.hideReactions,onSelectReaction:this.onSelectReaction})),s.a.createElement(De.c,{className:"IoIosThumbsUp",style:{width:"70%",height:"70%"},onClick:this.onToggleReactions})),s.a.createElement("div",{onClick:this.props.onTogglePlay,className:"movie-play-btn"},this.props.isPlaying&&this.props.currTime?s.a.createElement("i",{className:"fas fa-grip-lines-vertical"}):s.a.createElement("i",{className:"fas fa-play"})),s.a.createElement("div",{className:"volume",ref:this.volumeRef,onClick:this.handleClickInsideVolume},this.state.clickedOutsideVolume&&s.a.createElement("input",{type:"range",id:"volume",name:"volume",min:"0",max:"1",step:"0.01",value:this.props.volume,onChange:this.changeVolume}),this.props.volume<.01?s.a.createElement($.b,{className:"BsVolumeMuteFill",style:{width:"80%",height:"80%"}}):s.a.createElement(De.d,{className:"IoIosVolumeLow",style:{width:"100%",height:"100%"}})),s.a.createElement("div",{onClick:this.props.toggleFullScreen,className:"full-sceen-btn"},!this.props.isFullScreen&&s.a.createElement("i",{className:"fas fa-expand-arrows-alt"}),this.props.isFullScreen&&s.a.createElement("i",{className:"fas fa-compress-arrows-alt"})),this.state.reactions.map((function(e){return s.a.createElement("div",{style:{right:"".concat(e.posX,"%")},key:e.id,className:"reaction-animation ".concat(e.type," ").concat(e.myReaction?"my-reaction":"")})})))}}]),a}(s.a.Component),mt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={phrases:["Grab your popcorn","Enjoy!"],currTxt:"Take a seat",txtInterval:null,hideSpinner:!1},e.animateText=function(){var t=0,a=setInterval((function(){"Enjoy"===e.state.phrases[t]&&e.setState({hideSpinner:!0}),t<2&&e.setState({currTxt:e.state.phrases[t]}),t++}),2e3);e.setState({txtInterval:a})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.animateText()}},{key:"componentWillUnmount",value:function(){this.setState({txtInterval:null})}},{key:"render",value:function(){return s.a.createElement("div",{className:"movie-loader"},s.a.createElement("div",{className:this.state.hideSpinner?"hidden":"red-spinner"},s.a.createElement("img",{style:{width:"100%",height:"100%"},src:"https://i.gifer.com/8Etj.gif",alt:""})),s.a.createElement("div",null,s.a.createElement(Be.a,{mode:"out-in"},s.a.createElement(We.a,{key:this.state.currTxt,addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)},classNames:"phrase"},s.a.createElement("div",{className:"phrases ".concat(this.state.hideSpinner?"large-text":"")},this.state.currTxt)))))}}]),a}(s.a.Component),ut=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={movie:null,showVideo:!1,volume:.2,currTime:1,timeSet:!1,currUser:null,isFullScreen:!1,showParticles:!0,isVisible:!0,isChatVisible:!0,startX:0,startY:0,endX:0,endY:0,showEmojis:!1,duration:null,played:null,secondsElapsed:null,notFirstUser:!1,newUser:{},allowedToJoin:!1,request:!1,isFirstUser:!1,firstUser:{},isPlaying:!0,disableToggleUserList:!1,stopToggleUserList:!1,newUserFromBackend:{},playBtnMsg:null,loadedSeconds:null,isMuted:!1,innerHeight:null,innerWidth:null},e.playerRef=s.a.createRef(),e.stopVideo=function(){e.setState({isPlaying:!1})},e.onTogglePlay=function(){e.setState({isPlaying:!e.state.isPlaying},(function(){Ve.emit("toggle-play-btn",{isPlaying:e.state.isPlaying,currUserName:e.state.currUser?e.state.currUser.username:"guest"})}))},e.playBtnMsg=function(){return setTimeout((function(){e.setState({playBtnMsg:null})}),2e3),e.state.playBtnMsg},e.onAddNewUser=function(t,a,n){a._id===n._id?(e.setState({allowedToJoin:!0}),e.setState({firstUser:n}),e.setState({isFirstUser:!0}),e.setState({newUserFromBackend:a}),e.setState({currUser:a},(function(){}))):(e.setState({isFirstUser:!1}),e.setState({allowedToJoin:!1}),Ve.emit("get-first-user",n),Ve.emit("sending-request-for-approval",{newUser:a,firstUser:n}),Ve.on("sending-currTime-to-user",(function(t){e.setState({currTime:t.currTime}),e.setState({allowedToJoin:!0})})))},e.onDuration=function(t){e.setState({duration:t})},e.onProgress=function(t){if((window.innerWidth<415||window.innerHeight<415)&&0===t.loadedSeconds&&e.setState({isPlaying:!1},(function(){e.setState({isPlaying:!0})})),e.state.isPlaying)if(e.state.isFirstUser){var a=e.playerRef.current;if(a&&!e.state.timeSet&&e.state.allowedToJoin&&(0===e.state.currTime&&e.setState({currTime:1}),a.seekTo(e.state.currTime,"seconds"),e.setState({timeSet:!0})),!e.state.duration)return;var n=t.played*e.state.duration;n!==e.state.secondsElapsed&&e.setState({currTime:n})}else{if(e.onGetCurrTime(),!e.state.duration)return;var s=t.played*e.state.duration;s!==e.state.secondsElapsed&&e.setState({currTime:s})}},e.onGetCurrTime=function(){var t=e.playerRef.current;t&&!e.state.timeSet&&e.state.allowedToJoin&&(t.seekTo(e.state.currTime,"seconds"),e.setState({timeSet:!0}))},e.onPlaying=function(){return!!e.state.currTime},e.onVolumeChange=function(t){e.setState({volume:t,isMuted:!1})},e.onMovieReady=function(){var t=e.playerRef.current;t&&e.state.allowedToJoin&&t.seekTo(e.state.currTime)},e.toggleEmojis=function(){e.setState({showEmojis:!e.state.showEmojis})},e.hideEmojis=function(){e.setState({showEmojis:!1})},e.toggleFullScreen=function(){window.innerWidth<813?e.setState({isFullScreen:!1}):e.setState({isFullScreen:!e.state.isFullScreen})},e.fullScreenWatchRoom=function(){return e.state.isFullScreen&&window.innerWidth>813?"fullScreen-watch-room":""},e.fullScreenChat=function(){return e.state.isFullScreen&&window.innerWidth>813?"fullScreen-chat":""},e.fullScreenMsg=function(){return e.state.isFullScreen&&window.innerWidth,""},e.fullScreenInput=function(){return window.innerWidth>813&&e.state.isFullScreen?"fullScreen-chat-input":""},e.fullScreenChatBackground=function(){return window.innerWidth>813&&e.state.isFullScreen?(e.setState({showParticles:!1}),"chat-background"):(e.setState({showParticles:!0}),"")},e.fullScreenRoomWindow=function(){return window.innerWidth>813&&e.state.isFullScreen?"fullScreen-room-window":""},e.fullScreenFrame=function(){return window.innerWidth>813&&e.state.isFullScreen?"fullScreen-frame":""},e.fullScreenIframe=function(){return window.innerWidth>813&&e.state.isFullScreen?"fullScreen-iframe":""},e.fullScreenControlPanel=function(){return window.innerWidth>813&&e.state.isFullScreen?"fullScreen-control-panel":""},e.fullScreenMessageMe=function(){return window.innerWidth>813&&e.state.isFullScreen?"fullScreen-message-me":""},e.fullScreenMessageUser=function(){return window.innerWidth>813&&e.state.isFullScreen?"fullScreen-message-user":""},e.onGoBack=function(){e.props.history.goBack()},e.handleTouchStart=function(t){var a=t.targetTouches[0].clientX,n=t.targetTouches[0].clientY;e.setState({startX:a}),e.setState({startY:n})},e.handleTouchMove=function(t){var a=t.targetTouches[0].clientX,n=t.targetTouches[0].clientY;e.setState({endX:a}),e.setState({endY:n});var s=e.state,r=s.startX,i=s.endX,o=s.startY,c=s.endY;window.screen.width>415&&r-i>75&&c-o<10&&e.setState({isChatVisible:!1}),r-i<-75&&c-o<10&&e.setState({isChatVisible:!0})},e.onToggleDisableToggleUserList=function(){e.setState({disableToggleUserList:!e.state.disableToggleUserList})},e.onDisableToggleUserList=function(){e.setState({stopToggleUserList:!0})},e.onAnabelToggleUserList=function(){setTimeout((function(){e.setState({stopToggleUserList:!1})}),500)},e.onChangeDisableToggleUserList=function(){setTimeout((function(){e.setState({disableToggleUserList:!1})}),500)},e.onToggleUserList=function(){if(window.innerHeight>415&&window.innerWidth<415)e.setState({isVisible:!0});else{if(e.state.stopToggleUserList||window.innerHeight>415||e.state.disableToggleUserList)return;e.setState({isVisible:!e.state.isVisible})}},e.onChangeUserListAndChatToVisible=function(){e.setState({isVisible:!0}),e.setState({isChatVisible:!0})},e.onUpdateMovieMsgList=function(t){e.state.movie.msgList.push(t),e.props.updateMovie(e.state.movie)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.loadMovie(),this.setState({currUser:this.props.loggedInUser}),this.setState({innerWidth:window.innerWidth}),(window.innerWidth<415||window.innerHeight<415)&&this.setState({isMuted:!0}),Ve.setup(),Ve.on("get-first-user",(function(t){e.setState({isFirstUser:t.isFirstUser})})),Ve.on("sending-request-for-approval",(function(t){Ve.emit("sending-currTime-to-user",{newUser:t.newUser,currTime:e.state.currTime})})),Ve.on("toggle-play-btn",(function(t){e.setState({isPlaying:t.isPlaying},(function(){t.isPlaying?e.setState({playBtnMsg:"".concat(t.currUserName," resume the movie")}):e.setState({playBtnMsg:"".concat(t.currUserName," pause the movie")})}))})),this.state.showVideo||setTimeout((function(){e.setState({showVideo:!0})}),6500)}},{key:"componentDidUpdate",value:function(e,t){t.innerWidth!==this.state.innerWidth&&this.setState({innerWidth:window.innerWidth}),t.innerHeight!==this.state.innerHeight&&this.setState({innerHeight:window.innerHeight})}},{key:"componentWillUnmount",value:function(){this.setState({isPlaying:!0})}},{key:"loadMovie",value:function(){var e=Object(E.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,_.getById(t);case 3:a=e.sent,this.setState({movie:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.movie?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"watch-room ".concat(this.fullScreenWatchRoom()),ref:function(t){e.node=t}},s.a.createElement("div",{className:"room-window ".concat(this.fullScreenRoomWindow()),onTouchStart:function(t){return e.handleTouchStart(t)},onTouchMove:function(t){return e.handleTouchMove(t)}},s.a.createElement(ot,{roomId:this.state.movie._id,currUser:this.state.currUser,movie:this.state.movie,fullScreenChat:this.fullScreenChat,fullScreenChatBackground:this.fullScreenChatBackground,toggleFullScreen:this.toggleFullScreen,isFullScreen:this.state.isFullScreen,fullScreenMessageMe:this.fullScreenMessageMe,fullScreenMessageUser:this.fullScreenMessageUser,fullScreenMsg:this.fullScreenMsg,fullScreenInput:this.fullScreenInput,showParticles:this.state.showParticles,onGoBack:this.onGoBack,isVisible:this.state.isVisible,isChatVisible:this.state.isChatVisible,toggleEmojis:this.toggleEmojis,hideEmojis:this.hideEmojis,showEmojis:this.state.showEmojis,onAddNewUser:this.onAddNewUser,onUpdateFirstUser:this.onUpdateFirstUser,onToggleUserList:this.onToggleUserList,onChangeDisableToggleUserList:this.onChangeDisableToggleUserList,onToggleDisableToggleUserList:this.onToggleDisableToggleUserList,onDisableToggleUserList:this.onDisableToggleUserList,onAnabelToggleUserList:this.onAnabelToggleUserList,stopMovie:this.stopMovie,onChangeUserListAndChatToVisible:this.onChangeUserListAndChatToVisible,updateMovie:this.props.updateMovie,onUpdateMovieMsgList:this.onUpdateMovieMsgList}),s.a.createElement("section",{className:"frame ".concat(this.fullScreenFrame())},!this.state.showVideo&&s.a.createElement(mt,null),s.a.createElement("div",{className:"video disabled player-wrapper ".concat(this.state.showVideo?"":"hide-video")},s.a.createElement(Re.a,{className:"react-player",ref:this.playerRef,url:this.state.movie.videoUrl,width:"100%",height:"100%",muted:this.state.isMuted,volume:this.state.volume,playing:this.onPlaying&&this.state.isPlaying,onDuration:this.onDuration,onProgress:this.onProgress})),this.state.newUserFromBackend&&s.a.createElement(lt,{onVolumeChange:this.onVolumeChange,volume:this.state.volume,toggleFullScreen:this.toggleFullScreen,isFullScreen:this.state.isFullScreen,fullScreenControlPanel:this.fullScreenControlPanel,onTogglePlay:this.onTogglePlay,isPlaying:this.state.isPlaying,currTime:this.state.currTime,onChangeDisableToggleUserList:this.onChangeDisableToggleUserList,onToggleDisableToggleUserList:this.onToggleDisableToggleUserList,newUser:this.state.newUserFromBackend,isMuted:this.state.isMuted}),s.a.createElement("div",{className:"reaction"})))),(!this.state.isPlaying||!this.state.currTime)&&s.a.createElement("div",{onClick:this.onTogglePlay,className:"middle-play-btn"},s.a.createElement("i",{className:"fas fa-play"})),this.state.playBtnMsg&&s.a.createElement("div",{className:"play-btn-msg ".concat(this.state.isPlaying?"palying":"")},this.playBtnMsg())):s.a.createElement("div",null,"Loading....")}}]),a}(n.Component),dt={updateMovie:T},pt=Object(o.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),dt)(Object(p.o)(ut)),vt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={showComponent:!1},e.avgReview=function(e){var t=0,a=0;return e.reviews?(e.reviews.forEach((function(e){e.rating&&(t+=parseInt(e.rating),a++)})),(t/a).toFixed(1)):0},e.toggleFavoriteList=function(t){e.props.loggedInUser?(console.log("loggedInUser.favMovies:",e.props.loggedInUser.favMovies),e.props.toggleFavUserList(e.props.loggedInUser,t),console.log("favoriteList:",e.props.favoriteList)):e.onOpenModal()},e.onOpenModal=function(){e.setState({showComponent:!e.state.showComponent})},e.isFavoriteMovie=function(t){return e.props.loggedInUser&&e.props.loggedInUser.favMovies.find((function(e){return e._id===t._id}))?"favoriteBtnStyle":""},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){console.log("this.props.appCondition",this.props.appCondition)}},{key:"render",value:function(){var e=this,t=this.props,a=t.movie,n=t.toggleView,r=t.appCondition;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"genres-movie-img-container",style:{backgroundImage:"url(".concat(a.coverUrl?a.coverUrl:"",")")}}),s.a.createElement("div",{className:"info-continer-movie-card"},s.a.createElement("div",{className:"title ".concat(a.title.length>11?"ellipsis":"")},a.title),s.a.createElement("div",{className:"genres-container"},a.genres.map((function(e){return s.a.createElement("div",{className:"genre"},e)}))),r&&s.a.createElement("div",{className:"btns-container"},s.a.createElement("span",{className:"movie-btn movie-btn-details",onClick:function(){n("main")}},s.a.createElement(c.Link,{to:"/movie/".concat(a._id)},s.a.createElement("i",{className:"fas fa-info-circle"}))),s.a.createElement("span",{className:"movie-btn",onClick:function(){n("main")}},s.a.createElement(c.Link,{to:"/room/".concat(a._id)},s.a.createElement("i",{className:"far fa-play-circle"}))),s.a.createElement("span",{className:"movie-btn",onClick:function(){e.toggleFavoriteList(a)}},"favoriteBtnStyle"!==this.isFavoriteMovie(a)?s.a.createElement(c.Link,null,s.a.createElement("i",{className:"fas fa-plus"})):s.a.createElement(c.Link,null,s.a.createElement("i",{className:"fas fa-check"})))),!r&&s.a.createElement("div",{className:"btns-container"},s.a.createElement("span",{className:"movie-btn movie-btn-details"},s.a.createElement(c.Link,{to:"/movie/".concat(a._id)},s.a.createElement("i",{className:"fas fa-info-circle"}))),s.a.createElement("span",{className:"movie-btn"},s.a.createElement(c.Link,{to:"/room/".concat(a._id)},s.a.createElement("i",{className:"far fa-play-circle"}))),s.a.createElement("span",{className:"movie-btn",onClick:function(){e.toggleFavoriteList(a)}},"favoriteBtnStyle"!==this.isFavoriteMovie(a)?s.a.createElement(c.Link,null,s.a.createElement("i",{className:"fas fa-plus"})):s.a.createElement(c.Link,null,s.a.createElement("i",{className:"fas fa-check"})))),s.a.createElement("div",{className:"rate-container"},s.a.createElement("div",null,s.a.createElement("i",{className:"far fa-eye"}),a.viewersNumber?a.viewersNumber:Math.floor(150*Math.random()+50)),"\u2b50 ",this.avgReview(a),"/10")),this.state.showComponent?s.a.createElement(de,{onOpenModal:this.onOpenModal}):null)}}]),a}(n.Component),gt={toggleFavUserList:z},ht=Object(o.b)((function(e){return{favoriteList:e.movie.favoriteList,loggedInUser:e.user.loggedInUser}}),gt)(vt);function ft(e){var t=e.className,a=e.style,n=e.onClick;return s.a.createElement("div",{className:"".concat(t," slick-next-btn-style"),style:Object(g.a)({},a),onClick:n})}function Et(e){var t=e.className,a=e.style,n=e.onClick;return s.a.createElement("div",{className:"".concat(t," slick-prev-btn-style"),style:Object(g.a)({},a),onClick:n})}var yt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.movies,a=e.genre,n=e.appCondition,r=e.name,i={nextArrow:s.a.createElement(ft,null),prevArrow:s.a.createElement(Et,null),speed:500,slidesToShow:13,slidesToScroll:10,initialSlide:0,variableWidth:!0,swipeToSlide:!0,responsive:[{breakpoint:1600,settings:{slidesToShow:9,slidesToScroll:9}},{breakpoint:1288,settings:{slidesToShow:8,slidesToScroll:8}},{breakpoint:1160,settings:{slidesToShow:8,slidesToScroll:8}},{breakpoint:1024,settings:{slidesToShow:7,slidesToScroll:7}},{breakpoint:990,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:870,settings:{slidesToShow:5,slidesToScroll:5,initialSlide:0}},{breakpoint:730,settings:{slidesToShow:4,slidesToScroll:4,initialSlide:0}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:3,initialSlide:0}},{breakpoint:420,settings:{slidesToShow:3,slidesToScroll:2,swipeToSlide:!0}}]};return s.a.createElement(s.a.Fragment,null,"popular"===r&&s.a.createElement(ve.a,i,t.map((function(e){return s.a.createElement("div",{key:e._id,className:"movie-container"},s.a.createElement(ht,{className:"movie-preview",movie:e,appCondition:n}))}))),"genre"===r&&s.a.createElement(ve.a,i,t.filter((function(e){return e.genres.includes(a)})).map((function(e){return s.a.createElement("div",{key:e._id,className:"movie-container"},s.a.createElement(ht,{className:"movie-preview",movie:e}))}))))}}]),a}(n.Component);function kt(e){var t=e.movies,a=e.appCondition,n=t.slice(12,22);return s.a.createElement("div",{className:"movie-list"},s.a.createElement("div",{className:"movie-category"},s.a.createElement("div",{className:"category-title"},s.a.createElement("h4",{className:"category-name"},"Popular in WatChat")),s.a.createElement(yt,{movies:n,appCondition:a,name:"popular"})),["Action","Comedy","Crime","Drama","Fantasy","Adventure","Horror","Sci-Fi","Thriller"].map((function(e){return s.a.createElement("div",{className:"movie-category"},s.a.createElement("div",{className:"category-title"},s.a.createElement("h4",{className:"category-name"},e)),s.a.createElement(yt,{movies:t,genre:e,name:"genre"}))})))}function wt(e){var t=e.movies,a=e.toggleView,n=e.appCondition;return s.a.createElement("div",{className:"filtered-movie-list"},s.a.createElement("div",{className:"movie-category"},s.a.createElement("div",{className:"category-movies"},t.map((function(e){return s.a.createElement("div",{key:e._id,className:"movie-container"},s.a.createElement(ht,{className:"movie-preview",movie:e,toggleView:a,appCondition:n}))})))))}var bt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){console.log("this.props.currGenre",this.props.currGenre)}},{key:"getMoviesForDisplay",value:function(){var e=this,t=this.props.movies.filter((function(t){return t.genres.includes(e.props.currGenre)}));return"All"===this.props.currGenre?this.props.movies.filter((function(t){return t.title.toLowerCase().includes(e.props.currSearch.toLowerCase())})):t.filter((function(t){return t.title.toLowerCase().includes(e.props.currSearch.toLowerCase())}))}},{key:"render",value:function(){var e,t=this.props,a=t.currGenre,n=t.currSearch,r=t.currCmp,i=t.toggleView,o=t.appCondition;return e="navFilter"===r?this.props.movies:this.getMoviesForDisplay(),s.a.createElement("div",null,s.a.createElement("div",{className:"filtered-movies-section ".concat("navFilter"===r?"nav-filter-style":"")},0===e.length?s.a.createElement("div",{className:"no-movies-container"},s.a.createElement("div",{className:"no-movies-msg"},s.a.createElement("h2",null,"Sorry"),"No movies Found",n&&""!==n?s.a.createElement("span",null,' for "',n,'"'):null,a&&"All"!==a?s.a.createElement("span",null,' inside "',a,'" Genre'):null),s.a.createElement("img",{className:"no-movies-img",src:"../assets/img/no-movies-img.png",alt:""})):s.a.createElement(wt,{movies:e,toggleView:i,appCondition:o})))}}]),a}(n.Component),Nt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={active:"All",activeBtn:!1,keyUpValue:!1,search:""},e.buttons=["All","Action","Comedy","Crime","Drama","Fantasy","Adventure","Sci-Fi","Thriller","Horror","Fairy Tale"],e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.currCategory&&(this.setState({active:this.props.currCategory}),this.setState({activeBtn:!0},(function(){e.changeGenre(e.props.currCategory)})))}},{key:"changeToActive",value:function(e){var t=this;this.setState({active:e}),"All"===e?this.setState({activeBtn:!1},(function(){t.changeGenre(e)})):this.setState({activeBtn:!0},(function(){t.changeGenre(e)}))}},{key:"changeGenre",value:function(e){this.toggleView(),this.props.currGenre(e)}},{key:"onKeyUpValue",value:function(e){var t=this;e.target.value?this.setState({keyUpValue:!0,search:e.target.value},(function(){t.searchValue()})):this.setState({keyUpValue:!1,search:e.target.value},(function(){t.searchValue()}))}},{key:"searchValue",value:function(){this.toggleView(),this.props.currSearch(this.state.search)}},{key:"toggleView",value:function(){this.state.activeBtn||this.state.keyUpValue?this.props.toggleView("FilteredMovie"):this.props.toggleView("MovieList")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"movies-side-nav"},s.a.createElement("div",{className:"movies-sidenav"},s.a.createElement("div",{className:"side-nav-main"},s.a.createElement("div",null,"Search Movie"),s.a.createElement("input",{type:"text",onKeyUp:this.onKeyUpValue.bind(this)})),this.buttons.map((function(t){return s.a.createElement("div",{className:"side-btn ".concat(e.state.active===t?"active-side-btn":""),onClick:function(){return e.changeToActive(t)}},t)}))))}}]),a}(n.Component),jt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={filterBy:{search:"",minYear:-1/0,maxYear:1/0,type:"All"},currView:"MovieList",currGenre:"All",currSearch:"",appCondition:!1},e.cmpMap={MovieList:kt,FilteredMovie:bt},e.toggleView=function(t){e.setState({currView:t})},e.currGenre=function(t){e.setState({currGenre:t})},e.currSearch=function(t){e.setState({currSearch:t})},e}return Object(m.a)(a,[{key:"DynamicCmp",value:function(e){switch(e.currView){case"MovieList":return s.a.createElement(kt,e);case"FilteredMovie":return s.a.createElement(bt,e);default:return s.a.createElement("h1",null,"Something went wrong")}}},{key:"componentDidMount",value:function(){var e=this.props.match.params.category;console.log("currCategory",e),this.currGenre(e),e&&this.toggleView("FilteredMovie"),e||this.currGenre("All"),window.scrollTo(0,0)}},{key:"render",value:function(){var e=this.props.movies,t=this.state.currView,a=this.cmpMap[t],n=this.props.match.params.category;return e?s.a.createElement("div",{className:"movies-page"},s.a.createElement(Nt,{toggleView:this.toggleView,currGenre:this.currGenre,currSearch:this.currSearch,currCategory:n}),s.a.createElement("div",{className:"main-section"},s.a.createElement(a,{currView:t,movies:e,currGenre:this.state.currGenre,currSearch:this.state.currSearch,appCondition:this.state.appCondition}))):s.a.createElement("div",null,"Loading....")}}]),a}(n.Component),St={loadMovies:M,logout:W},Ut=Object(o.b)((function(e){return{movies:e.movie.movies,loggedInUser:e.user.loggedInUser}}),St)(jt),Ct=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={currGenre:e.props.location.genre.name},e.changeCategory=function(){e.setState({currGenre:e.props.location.genre.name})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.loadMovies(this.state.filterBy)}},{key:"render",value:function(){var e=this,t=this.props.movies,a=t.filter((function(t){return t.genres.includes("".concat(e.state.currGenre))}));return t?s.a.createElement(s.a.Fragment,null,console.log(t),s.a.createElement("div",{className:"movie-app"},s.a.createElement("div",{className:"main-header-container"},s.a.createElement("div",{className:"hero-slider"},s.a.createElement("div",{className:"slide1"},s.a.createElement("div",{className:"text-inside-slide"},s.a.createElement("div",{className:"slide-upper-text-container"},s.a.createElement("div",{className:"slide-title"},"Wrath of Titans"),s.a.createElement("div",{className:"slide-genres"},s.a.createElement("div",{className:"genre1"},"Action"),s.a.createElement("div",{className:"genre2"},"Adventure"),s.a.createElement("div",{className:"genre3"},"Fantasy")),s.a.createElement("div",{className:"slide-btns"},s.a.createElement("div",{className:"slide-btn1 slide-btn"},"watch movie"),s.a.createElement("div",{className:"slide-btn2 slide-btn"},"view info"),s.a.createElement("div",{className:"slide-btn3 slide-btn"},"+ add to favorite"))),s.a.createElement("div",{className:"slide-rate"},s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star-half-alt star-color"}),s.a.createElement("i",{className:"far fa-star star-color"})))),s.a.createElement("div",{className:"slide2"},s.a.createElement("div",{className:"text-inside-slide"},s.a.createElement("div",{className:"slide-upper-text-container"},s.a.createElement("div",{className:"slide-title"},"Guardians of the Galaxy"),s.a.createElement("div",{className:"slide-genres"},s.a.createElement("div",{className:"genre1"},"Action"),s.a.createElement("div",{className:"genre2"},"Adventure"),s.a.createElement("div",{className:"genre3"},"Comedy")),s.a.createElement("div",{className:"slide-btns"},s.a.createElement("div",{className:"slide-btn1 slide-btn"},"watch movie"),s.a.createElement("div",{className:"slide-btn2 slide-btn"},"view info"),s.a.createElement("div",{className:"slide-btn3 slide-btn"},"+ add to favorite"))),s.a.createElement("div",{className:"slide-rate"},s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star-half-alt star-color"}),s.a.createElement("i",{className:"far fa-star star-color"})))),s.a.createElement("div",{className:"slide3"},s.a.createElement("div",{className:"text-inside-slide"},s.a.createElement("div",{className:"slide-upper-text-container"},s.a.createElement("div",{className:"slide-title slide-dark-text"},"Pirates of the Caribbean"),s.a.createElement("div",{className:"slide-genres"},s.a.createElement("div",{className:"genre1 slide-dark-text"},"Action"),s.a.createElement("div",{className:"genre2 slide-dark-text"},"Adventure"),s.a.createElement("div",{className:"genre3 slide-dark-text"},"Fantasy")),s.a.createElement("div",{className:"slide-btns"},s.a.createElement("div",{className:"slide-btn1 slide-btn"},"watch movie"),s.a.createElement("div",{className:"slide-btn2 slide-btn slide-dark-text"},"view info"),s.a.createElement("div",{className:"slide-btn3 slide-btn slide-dark-text"},"+ add to favorite"))),s.a.createElement("div",{className:"slide-rate"},s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star-half-alt star-color"}),s.a.createElement("i",{className:"far fa-star star-color"})))),s.a.createElement("div",{className:"slide4"},s.a.createElement("div",{className:"text-inside-slide"},s.a.createElement("div",{className:"slide-upper-text-container"},s.a.createElement("div",{className:"slide-title"},"IT"),s.a.createElement("div",{className:"slide-genres"},s.a.createElement("div",{className:"genre1"},"Horror")),s.a.createElement("div",{className:"slide-btns"},s.a.createElement("div",{className:"slide-btn1 slide-btn"},"watch movie"),s.a.createElement("div",{className:"slide-btn2 slide-btn"},"view info"),s.a.createElement("div",{className:"slide-btn3 slide-btn"},"+ add to favorite"))),s.a.createElement("div",{className:"slide-rate"},s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star star-color"}),s.a.createElement("i",{className:"fas fa-star-half-alt star-color"}),s.a.createElement("i",{className:"far fa-star star-color"})))))),console.log("this.props.location.genre.name",this.props.location.genre.name),s.a.createElement("div",{className:"movie-list"},s.a.createElement("div",{className:"movie-category"},s.a.createElement("div",{className:"category-title"},s.a.createElement("h4",{className:"category-name"},this.state.genre),s.a.createElement("h4",{className:"all-btn"},"See All ",a.length)),s.a.createElement("div",{className:"category-movies"},a.map((function(e){return s.a.createElement("div",{key:e._id,className:"movie-container"},s.a.createElement("div",{className:"movie-preview"},s.a.createElement("div",{className:"movie-img-container",style:{backgroundImage:"url(".concat(e.coverUrl?e.coverUrl:"",")")}})),s.a.createElement("div",{className:"btns-container"},s.a.createElement("span",{className:"movie-btn movie-btn-details"},s.a.createElement(c.Link,{to:"/movie/".concat(e._id)},"Details"))))}))))))):s.a.createElement("div",null,"Loading....")}}]),a}(n.Component),Ot={loadMovies:M,logout:W},_t=Object(o.b)((function(e){return{movies:e.movie.movies,loggedInUser:e.user.loggedInUser}}),Ot)(Ct),xt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.loadMovies()}},{key:"getMovies",value:function(e){switch(e){case"editors-adventure":return this.props.movies.filter((function(e){return"X-Men: Dark Phoenix"===e.title||"Iorn-Man"===e.title||"Wrath of the Titans"===e.title||"Back to the Future"===e.title||"Hellboy"===e.title||"Avatar"===e.title}));case"all-adventure":return this.props.movies.filter((function(e){return e.genres.includes("Adventure")}));case"editors-action":return this.props.movies.filter((function(e){return"Avengers: Endgame"===e.title||"Spider-Man: Far from Home"===e.title||"The Suicide Squad"===e.title||"The Batman"===e.title||"Iorn-Man"===e.title||"X-Men: Dark Phoenix"===e.title}));case"all-action":return this.props.movies.filter((function(e){return e.genres.includes("Action")}));case"editors-horror":return this.props.movies.filter((function(e){return"IT"===e.title||"Texas Chainsaw"===e.title||"A Nightmare on Elm Street 3: Dream Warriors"===e.title||"GRETEL & HANSEL"===e.title||"Zombieland: Double Tap"===e.title||"Crawl"===e.title}));case"all-horror":return this.props.movies.filter((function(e){return e.genres.includes("Horror")}));default:return""}}},{key:"render",value:function(){var e=this.getMovies(this.props.match.params.category);return e?s.a.createElement("div",{className:"editors-movies-page",id:"top"},s.a.createElement("div",null,e.map((function(e,t){return s.a.createElement("div",{className:"movie-card ".concat("direction-"+(t%2?"r":"l"))},s.a.createElement("div",{className:"container "},s.a.createElement("div",{className:"img-container"},s.a.createElement("img",{src:"".concat(e.wideCoverUrl),alt:""}),s.a.createElement("div",{className:"before-img"})),s.a.createElement("div",{className:"movie-details"},s.a.createElement("div",{className:"title"},e.title),s.a.createElement("div",{className:"description"},e.description),s.a.createElement("div",{className:"genres"},e.genres.map((function(e){return s.a.createElement("span",null,e," ")}))),s.a.createElement("div",{className:"year"},e.year," |",s.a.createElement("span",null," ",e.duration)),s.a.createElement(c.Link,{to:"/movie/".concat(e._id)},s.a.createElement("div",{className:"trailer-btn"},"More Info")))))})))):s.a.createElement("div",null,"Loading....")}}]),a}(n.Component),Mt={loadMovies:M},Tt=Object(o.b)((function(e){return{movies:e.movie.movies}}),Mt)(xt),Lt=[{path:"/",component:we},{path:"/about",component:be},{path:"/movies",component:Ut},{path:"/movies/:category",component:Ut},{path:"/genre",component:_t},{path:"/Movie/:id",component:Ue},{path:"/user",component:Ie},{path:"/room/:id",component:pt},{path:"/editor-movies/:category",component:Tt}],It=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isShown:!0},e.closeModal=function(){e.setState({isShown:!1}),e.props.onOpenUserModal()},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.isShown;return s.a.createElement("div",{className:"modal-wrapper ".concat(e?"":"hide"),onClick:this.closeModal},s.a.createElement("div",{className:"user-modal-content",onClick:function(e){return e.stopPropagation()}},s.a.createElement(Ie,{closeModal:this.closeModal})))}}]),a}(s.a.Component),Ft=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={showComponent:!1,showUserModal:!1,color:"",active:"",movieId:""},e.listenScrollEvent=function(t){window.scrollY>400?e.setState({color:"rgba(0, 0, 0, 0.666)"}):e.setState({color:""})},e.onOpenModal=function(){e.setState({showComponent:!e.state.showComponent})},e.onOpenUserModal=function(){e.setState({showUserModal:!e.state.showUserModal})},e.logout=function(){"/user"===e.props.history.location.pathname?(e.props.history.push("/"),e.props.logout()):e.props.history.location.pathname.includes("/room")?(console.log("movie id",e.props.history.location.pathname.split("/")[2]),e.props.logout(),Ve.emit("chat room",{roomId:e.props.history.location.pathname.split("/")[2],user:null})):e.props.logout()},e.hideNavbar=function(){return e.props.history.location.pathname.includes("/room")?"hide-navbar":""},e.onActiveBtnAndToggleView=function(){e.props.toggleView("main"),e.changeToActiveBtn("home"),e.props.changeAppActiveName("home"),window.scrollTo(0,0)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.listenScrollEvent),this.setState({active:"home"}),this.loadMovie()}},{key:"componentWillUnmount",value:function(){this.setState({active:""})}},{key:"loadMovie",value:function(){var e=Object(E.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.history.location.pathname.split("/")[2],this.setState({movieId:t}),e.next=4,_.getById(t);case 4:a=e.sent,console.log("movie:",a);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeToActiveBtn",value:function(e){this.setState({active:e}),this.props.toggleView("main")}},{key:"render",value:function(){var e=this,t=this.props.loggedInUser;return s.a.createElement(s.a.Fragment,null,s.a.createElement("nav",{className:"main-nav after-canvas ".concat(this.hideNavbar()),style:{backgroundColor:this.state.color}},s.a.createElement("div",{className:"nav-container"},s.a.createElement("div",{className:"links-container"},s.a.createElement("div",{className:"home nav-column ".concat("home"===this.state.active?"active-navLink":"")},s.a.createElement(c.NavLink,{className:"navlink-btn  ",to:"/",onClick:function(){e.changeToActiveBtn("home")}},"Home")),s.a.createElement("div",{className:"about nav-column ".concat("about"===this.state.active?"active-navLink":"")},s.a.createElement(c.NavLink,{className:"navlink-btn",to:"/about",onClick:function(){e.changeToActiveBtn("about")}},"About")),s.a.createElement("div",{className:"movies nav-column ".concat("movie"===this.state.active?"active-navLink":"")},s.a.createElement(c.NavLink,{className:"navlink-btn",to:"/movies",onClick:function(){e.changeToActiveBtn("movie")}},"Movies"))),s.a.createElement(c.Link,{className:"main-title nav-column logo",to:"/",onClick:function(){e.onActiveBtnAndToggleView()}},s.a.createElement("div",{className:"WatChat-logo"},"WatChat"),s.a.createElement("div",{className:"under-logo"},"- online cinema -")),s.a.createElement("div",{className:"login-and-serach-section"},s.a.createElement(qe,{className:"navlink-search nav-column",toggleView:this.props.toggleView,searchingValue:"movie"}),s.a.createElement("div",{className:"user-container nav-column"},null===t&&s.a.createElement("div",{className:"user-login  after-canvas",onClick:this.onOpenModal},"Log in"),s.a.createElement("div",{className:"user-details-container"},t&&s.a.createElement("div",{className:"user-name"},"Hello ",t.username),t&&s.a.createElement("div",{id:"logout-btn",onClick:this.logout},"Logout")),t&&t.avatar&&s.a.createElement("div",{className:"user-details-btn userImg"},s.a.createElement("div",{className:"user-img",style:{backgroundImage:"url(".concat(t.avatar,")")},onClick:this.onOpenUserModal})))))),this.state.showComponent?s.a.createElement(de,{onOpenModal:this.onOpenModal}):null,this.state.showUserModal?s.a.createElement(It,{onOpenUserModal:this.onOpenUserModal}):null)}}]),a}(n.Component),Rt={logout:W},At=Object(o.b)((function(e){return{loggedInUser:e.user.loggedInUser,users:e.user.users}}),Rt)(Object(p.o)(Ft));var Gt=Object(p.o)((function(e){var t=e.movie,a=e.removeFromFavList;return s.a.createElement("div",{className:"favorite-preview"},s.a.createElement("img",{src:"".concat(t.coverUrl),alt:""}),s.a.createElement("div",{className:"movie-details"},s.a.createElement("div",{className:"title"},t.title),s.a.createElement("div",{className:"genres"},t.genres&&t.genres.map((function(e,t){return s.a.createElement("span",{key:t},e)}))),s.a.createElement("div",{className:"duration"},t.duration)),s.a.createElement("div",{className:"remove-from-list-btn",onClick:function(e){a(e,t)}}," ",s.a.createElement("i",{className:"fas fa-trash-alt"})))}));function Vt(e){var t=e.loggedInUser,a=e.removeFromFavList,n=e.favListRef,r=e.clickedOutside,i=e.handleClickInside;return s.a.createElement("div",{className:"fav-list-continer"},s.a.createElement("div",{className:"fav-list-btn ".concat(r?"":"fav-btn-open"),ref:n,onClick:i},s.a.createElement("div",null,"My List")),s.a.createElement("div",{className:"favorite-movies-section",ref:n,onClick:i},s.a.createElement("div",{className:"favorite-movies-list ".concat(r?"closeNav":"openNav open-nav-style")},s.a.createElement("div",{className:"close-list-msg  ".concat(r?"hide-closing-msg":"")},s.a.createElement("i",{className:"fas fa-long-arrow-alt-left"})," Click to Close"),s.a.createElement("div",{className:"container"},t&&t.favMovies.length>0?t.favMovies.map((function(e){return s.a.createElement(Gt,{movie:e,removeFromFavList:a})})):s.a.createElement("div",{className:"empty-msg"},s.a.createElement("i",null,"The List is Empty"))))))}var Dt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={showComponent:!1,color:"",active:""},e.hideNavbar=function(){return e.props.history.location.pathname.includes("/room")?"hide-mobile-navbar":""},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setState({active:"home"})}},{key:"componentWillUnmount",value:function(){this.setState({active:""})}},{key:"changeToActiveBtn",value:function(e){this.setState({active:e}),this.props.toggleView("main"),this.props.changeAppActiveName("")}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"mobile-navbar ".concat(this.hideNavbar())},s.a.createElement("div",{className:"navbar-btns"},s.a.createElement("div",{className:"home nav-column ".concat("home"===this.state.active||this.props.active?"active-navLink":"")},s.a.createElement(c.NavLink,{className:"navlink-btn  ",to:"/",onClick:function(){e.changeToActiveBtn("home")}},s.a.createElement("i",{className:"fas fa-home"}),"Home")),s.a.createElement("div",{className:"about nav-column ".concat("about"===this.state.active&&"home"!==this.props.active?"active-navLink":"")},s.a.createElement(c.NavLink,{className:"navlink-btn",to:"/about",onClick:function(){e.changeToActiveBtn("about")}},s.a.createElement("i",{className:"fas fa-info-circle"}),"About")),s.a.createElement("div",{className:"movies nav-column ".concat("movie"===this.state.active&&"home"!==this.props.active?"active-navLink":"")},s.a.createElement(c.NavLink,{className:"navlink-btn",to:"/movies",onClick:function(){e.changeToActiveBtn("movie")}},s.a.createElement("i",{className:"fas fa-film"}),"Movies"))),s.a.createElement(qe,{className:"navlink-search nav-column",toggleView:this.props.toggleView,searchingValue:"movie"})))}}]),a}(n.Component),Pt={logout:W},Bt=Object(o.b)((function(e){return{loggedInUser:e.user.loggedInUser,users:e.user.users}}),Pt)(Object(p.o)(Dt)),Wt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={currView:"main",currCmp:"navFilter",appCondition:!0,active:"",clickedOutside:!0},e.favListRef=s.a.createRef(),e.handleClickOutside=function(t){(window.screen.width<=415&&!e.favListRef.current.contains(t.target)||window.screen.height<=415&&!e.favListRef.current.contains(t.target))&&e.setState({clickedOutside:!0})},e.handleClickInside=function(){return e.setState({clickedOutside:!e.state.clickedOutside})},e.removeFromFavList=function(t,a){t.stopPropagation(),e.props.loggedInUser&&e.props.toggleFavUserList(e.props.loggedInUser,a)},e.toggleView=function(t){e.setState({currView:t})},e.changeAppActiveName=function(t){e.setState({active:t})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this.state,t=e.currView,a=e.appCondition,n=this.props,r=n.movies,i=n.loggedInUser;return s.a.createElement("div",{className:"App"},s.a.createElement("header",null,s.a.createElement(At,{toggleView:this.toggleView,changeAppActiveName:this.changeAppActiveName})),"FilteredMovie"===t&&s.a.createElement(bt,{movies:r,currCmp:this.state.currCmp,toggleView:this.toggleView,appCondition:a}),"main"===t&&s.a.createElement("main",null,s.a.createElement(s.a.Fragment,null,s.a.createElement(p.g,null,Lt.map((function(e){return s.a.createElement(p.d,{key:e.path,exact:!0,component:e.component,path:e.path})}))))),s.a.createElement(Vt,{removeFromFavList:this.removeFromFavList,loggedInUser:i,clickedOutside:this.state.clickedOutside,handleClickInside:this.handleClickInside,favListRef:this.favListRef}),s.a.createElement(Bt,{toggleView:this.toggleView,active:this.state.active,changeAppActiveName:this.changeAppActiveName}))}}]),a}(s.a.Component),Ht={toggleFavUserList:z},zt=Object(o.b)((function(e){return{movies:e.movie.movies,loggedInUser:e.user.loggedInUser}}),Ht)(Wt),Xt=(a(521),a(49)),Yt=a(179),Jt={reviews:[],selectedReview:null},qt=null;sessionStorage.user&&(qt=JSON.parse(sessionStorage.user));var Kt={loggedInUser:qt,users:[]},Zt={isLoading:!1},$t={movies:[]};var Qt=Object(Xt.c)({system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(g.a)(Object(g.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(g.a)(Object(g.a)({},e),{},{isLoading:!1});default:return e}},review:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_REVIEWS":return Object(g.a)(Object(g.a)({},e),{},{reviews:t.reviews});case"REVIEW_ADD":return Object(g.a)(Object(g.a)({},e),{},{reviews:[].concat(Object(y.a)(e.reviews),[t.addedReview])});case"REVIEW_UPDATE":return Object(g.a)(Object(g.a)({},e),{},{reviews:e.reviews.map((function(e){return e._id===t.review._id?t.review:e}))});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(g.a)(Object(g.a)({},e),{},{loggedInUser:t.user});case"USER_REMOVE":return Object(g.a)(Object(g.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return console.log("action.users:",t.users),Object(g.a)(Object(g.a)({},e),{},{users:t.users});case"UPDATE_USER":case"ADD_FAV_MOVIE":case"REMOVE_FAV_MOVIE":return Object(g.a)(Object(g.a)({},e),{},{loggedInUser:t.user});default:return e}},movie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MOVIES":return Object(g.a)(Object(g.a)({},e),{},{movies:t.movies});case"ADD_MOVIE":var a=[].concat(Object(y.a)(e.movies),[t.savedMovie]);return Object(g.a)(Object(g.a)({},e),{},{movies:a});case"UPDATE_MOVIE":return console.log("UPDATE_MOVIE: ",t.savedMovie),Object(g.a)(Object(g.a)({},e),{},{movies:e.movies.map((function(e){return e._id===t.savedMovie._id?t.savedMovie:e}))});default:return e}}}),ea=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Xt.d,ta=Object(Xt.e)(Qt,ea(Object(Xt.a)(Yt.a)));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(o.a,{store:ta},s.a.createElement(c.HashRouter,null,s.a.createElement(zt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[183,1,2]]]);
//# sourceMappingURL=main.6c8200e4.chunk.js.map